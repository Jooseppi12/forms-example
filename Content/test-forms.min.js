(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.WebSharper={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return WebSharper.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:WebSharper.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},MarkResizable:function(n){return Object.defineProperty(n,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},MarkReadOnly:function(n){return Object.defineProperty(n,"readonly",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.WebSharper.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$;b=a.test_forms=a.test_forms||{};c=b.Client=b.Client||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=d.Obj=d.Obj||{};g=d.UI=d.UI||{};h=g.Var=g.Var||{};i=d.Forms=d.Forms||{};j=i.Form=i.Form||{};k=c.Form1Data=c.Form1Data||{};l=a["StartupCode$test-forms$Client"]=a["StartupCode$test-forms$Client"]||{};m=i.Pervasives=i.Pervasives||{};n=d.JavaScript=d.JavaScript||{};o=n.JS=n.JS||{};p=g.Doc=g.Doc||{};q=g.View=g.View||{};r=g.Submitter=g.Submitter||{};s=g.Client=g.Client||{};t=s.Templates=s.Templates||{};u=n.Pervasives=n.Pervasives||{};v=c.State=c.State||{};w=a["test-forms_Router"]=a["test-forms_Router"]||{};x=g.Router=g.Router||{};y=i.Fresh=i.Fresh||{};z=g.Var$1=g.Var$1||{};A=d.List=d.List||{};B=A.T=A.T||{};C=g.Snap=g.Snap||{};D=g.AttrProxy=g.AttrProxy||{};E=d.Numeric=d.Numeric||{};F=d.Strings=d.Strings||{};G=a.EventTarget;H=a.Node;I=d.Collections=d.Collections||{};J=I.Dictionary=I.Dictionary||{};K=d.Unchecked=d.Unchecked||{};L=d.Sitelets=d.Sitelets||{};M=L.RouterOperators=L.RouterOperators||{};N=L.RouterModule=L.RouterModule||{};O=L.Route=L.Route||{};P=i.Result=i.Result||{};Q=g.ConcreteVar=g.ConcreteVar||{};R=i.ErrorMessage=i.ErrorMessage||{};S=g.Docs=g.Docs||{};T=d.Seq=d.Seq||{};U=g.AttrModule=g.AttrModule||{};V=g.Attrs=g.Attrs||{};W=g.DomUtility=g.DomUtility||{};X=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};Y=d.Arrays=d.Arrays||{};Z=I.HashSet=I.HashSet||{};_0=a.WindowOrWorkerGlobalScope;_1=L.Router=L.Router||{};_2=L.List=L.List||{};_3=d.Option=d.Option||{};_4=a.StartupCode$WebSharper_Forms$Forms=a.StartupCode$WebSharper_Forms$Forms||{};_5=g.Abbrev=g.Abbrev||{};_6=_5.Fresh=_5.Fresh||{};_7=g.DocElemNode=g.DocElemNode||{};_8=a.CharacterData;_9=d.Enumerator=d.Enumerator||{};_=_9.T=_9.T||{};$=g.BindVar=g.BindVar||{};ba=I.DictionaryUtil=I.DictionaryUtil||{};bb=a.Element;bc=a.Object;bd=t.Prepare=t.Prepare||{};be=d.Slice=d.Slice||{};bf=I.KeyCollection=I.KeyCollection||{};bg=g.An=g.An||{};bh=s.Settings=s.Settings||{};bi=_5.Mailbox=_5.Mailbox||{};bj=I.FSharpMap=I.FSharpMap||{};bk=I.Map=I.Map||{};bl=d.Utils=d.Utils||{};bm=d.Concurrency=d.Concurrency||{};bn=s.Attrs=s.Attrs||{};bo=bn.Dyn=bn.Dyn||{};bp=g.Elt=g.Elt||{};bq=g.Array=g.Array||{};br=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bs=s.Docs=s.Docs||{};bt=bs.RunState=bs.RunState||{};bu=bs.NodeSet=bs.NodeSet||{};bv=g.Anims=g.Anims||{};bw=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bx=I.BalancedTree=I.BalancedTree||{};by=bx.Tree=bx.Tree||{};bz=I.Pair=I.Pair||{};bA=a.StartupCode$WebSharper_Sitelets$Router=a.StartupCode$WebSharper_Sitelets$Router||{};bB=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bC=d.Queue=d.Queue||{};bD=g.Updates=g.Updates||{};bE=g.String=g.String||{};bF=g.CheckedInput=g.CheckedInput||{};bG=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bH=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bI=g.AppendList=g.AppendList||{};bJ=L.StringEncoding=L.StringEncoding||{};bK=d.Char=d.Char||{};bL=a.System=a.System||{};bM=bL.Guid=bL.Guid||{};bN=I.MapUtil=I.MapUtil||{};bO=bm.Scheduler=bm.Scheduler||{};bP=L.PathUtil=L.PathUtil||{};bQ=d.DateUtil=d.DateUtil||{};bR=g.DynamicAttrNode=g.DynamicAttrNode||{};bS=a.Error;bT=d.KeyNotFoundException=d.KeyNotFoundException||{};bU=g.Easing=g.Easing||{};bV=bm.AsyncBody=bm.AsyncBody||{};bW=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bX=bm.CT=bm.CT||{};bY=_5.HashSet=_5.HashSet||{};bZ=I.HashSetUtil=I.HashSetUtil||{};b0=d.CancellationTokenSource=d.CancellationTokenSource||{};b1=bs.DomNodes=bs.DomNodes||{};b2=d.OperationCanceledException=d.OperationCanceledException||{};b3=d.Lazy=d.Lazy||{};b4=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};b5=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};b6=b5.LazyRecord=b5.LazyRecord||{};b7=d.FormatException=d.FormatException||{};b8=d&&d.Runtime;b9=a.console;b_=a.String;b$=a.Date;c.Main=function(){var ca;ca=p.BindView(function(cb){return cb.$==1?cb.$0.$==1?j.Render(function(cc){return function(cd){return c.RenderForm2Case2(cc,cd);};},c.Form2Case2(cb.$0.$0)):j.Render(function(cc){return function(cd){return c.RenderForm2Case1(cc,cd);};},c.Form2Case1(cb.$0.$0)):j.Render(b8.Curried3(c.RenderForm1),c.Form1(k.New("",0)));},c.router().get_View());t.LoadLocalTemplates("");p.RunById("main",ca);};c.router=function(){l.$cctor();return l.router;};c.Form2Case2=function(ca){return j.Run(function(cb){a.alert("Given: "+a.String(cb));},j.WithSubmit(m.op_LessMultiplyGreater(j.Return(a.id),j.Yield(ca))));};c.RenderForm2Case2=function(ca,cb){function cc(cd,ce){return cb.Trigger();}return p.Element("div",[],[p.IntInputUnchecked([],ca),p.Element("button",[D.HandlerImpl("click",function(cd){return function(ce){return cc(cd,ce);};})],[p.TextNode("Go")])]);};c.Form2Case1=function(ca){return j.Run(function(cb){a.alert(cb);},j.WithSubmit(m.op_LessMultiplyGreater(j.Return(a.id),j.Yield(ca))));};c.RenderForm2Case1=function(ca,cb){function cc(cd,ce){return cb.Trigger();}return p.Element("div",[],[p.Input([],ca),p.Element("button",[D.HandlerImpl("click",function(cd){return function(ce){return cc(cd,ce);};})],[p.TextNode("Go")])]);};c.Form1=function(ca){return j.Run(function(cb){if(F.Trim(cb.String)!="")c.router().Set({$:1,$0:{$:0,$0:cb.String}});else c.router().Set({$:1,$0:{$:1,$0:cb.Int}});},j.WithSubmit(m.op_LessMultiplyGreater(m.op_LessMultiplyGreater(j.Return(function(cb){return function(cc){return k.Create(cb,cc);};}),j.Yield(ca.String)),j.Yield(ca.Int))));};c.RenderForm1=function(ca,cb,cc){function cd(ce,cf){return cc.Trigger();}return p.Element("div",[],[p.Element("p",[],[p.TextNode("If the string field is not empty, go to state2 with the string input otherwise go to state2 with the int input")]),p.Input([],ca),p.IntInputUnchecked([],cb),p.Element("button",[D.HandlerImpl("click",function(ce){return function(cf){return cd(ce,cf);};})],[p.TextNode("Go to State 2")])]);};e.FailWith=function(ca){throw new bS(ca);};e.KeyValue=function(ca){return[ca.K,ca.V];};e.range=function(ca,cb){var cc;cc=1+cb-ca;return cc<=0?[]:T.init(cc,function(cd){return cd+ca;});};f=d.Obj=b8.Class({Equals:function(ca){return this===ca;},GetHashCode:function(){return -1;}},null,f);f.New=b8.Ctor(function(){},f);h=g.Var=b8.Class({},f,h);h.New=b8.Ctor(function(){f.New.call(this);},h);j.Render=function(ca,cb){var cc;cc=cb.render(ca);return p.Append(p.EmbedView(q.Map(function(){return p.get_Empty();},cb.view)),cc);};j.Return=function(ca){return j.New(y.Id(),q.Const({$:0,$0:ca}),a.id);};j.Yield=function(ca){return j.YieldVar(z.Create$1(ca));};j.WithSubmit=function(ca){var cb;cb=new r.New(ca.view,{$:1,$0:B.Empty});return j.New(y.Id(),cb.view,function(cc){return(ca.render(cc))(cb);});};j.Run=function(ca,cb){return j.Map(function(cc){ca(cc);return cc;},cb);};j.Apply=function(ca,cb){var cc,cd;return j.New(y.Id(),q.Map2(P.Apply,ca.view,cb.view),(cc=ca.render,(cd=cb.render,function(ce){return cd(cc(ce));})));};j.YieldVar=function(ca){return j.New(ca.get_Id(),q.Map(function(cb){return{$:0,$0:cb};},ca.get_View()),function(cb){return cb(ca);});};j.Map=function(ca,cb){return j.MapResult(function(cc){return P.Map(ca,cc);},cb);};j.MapResult=function(ca,cb){return j.New(cb.id,q.Map(ca,cb.view),cb.render);};k.Create=function(ca,cb){return k.New(ca,cb);};k.New=function(ca,cb){return{String:ca,Int:cb};};l.$cctor=function(){l.$cctor=a.ignore;l.router=x.InstallHash(v.Form1,w.r$1());};m.op_LessMultiplyGreater=function(ca,cb){return j.Apply(ca,cb);};o.GetFieldValues=function(ca){var cb,cc;cb=[];for(var cd in ca)cb.push(ca[cd]);return cb;};j.New=function(ca,cb,cc){return{id:ca,view:cb,render:cc};};p=g.Doc=b8.Class({},f,p);p.Append=function(ca,cb){return p.Mk({$:0,$0:ca.docNode,$1:cb.docNode},q.Map2Unit(ca.updates,cb.updates));};p.get_Empty=function(){return p.Mk(null,q.Const());};p.RunById=function(ca,cb){var cc;cc=self.document.getElementById(ca);if(K.Equals(cc,null))e.FailWith("invalid id: "+ca);else p.Run(cc,cb);};p.BindView=function(ca,cb){return p.EmbedView(q.Map(ca,cb));};p.Mk=function(ca,cb){return new p.New(ca,cb);};p.EmbedView=function(ca){var cb;cb=S.CreateEmbedNode();return p.Mk({$:2,$0:cb},q.Map(a.ignore,q.Bind(function(cc){S.UpdateEmbedNode(cb,cc.docNode);return cc.updates;},ca)));};p.IntInputUnchecked=function(ca,cb){return p.InputInternal("input",function(){return T.append(ca,[cb.Get()===0?D.Create("value","0"):V.EmptyAttr(),U.IntValueUnchecked(cb),D.Create("type","number")]);});};p.TextNode=function(ca){return p.Mk({$:5,$0:self.document.createTextNode(ca)},q.Const());};p.Input=function(ca,cb){return p.InputInternal("input",function(){return T.append(ca,[U.Value(cb)]);});};p.Run=function(ca,cb){S.LinkElement(ca,cb.docNode);p.RunInPlace(false,ca,cb);};p.Element=function(ca,cb,cc){var cd,ce;cd=D.Concat(cb);ce=p.Concat(cc);return bp.New(self.document.createElement(ca),cd,ce);};p.InputInternal=function(ca,cb){var cc;cc=self.document.createElement(ca);return bp.New(cc,D.Concat(cb(cc)),p.get_Empty());};p.RunInPlace=function(ca,cb,cc){var cd;cd=S.CreateRunState(cb,cc.docNode);q.Sink(bg.get_UseAnimations()||bh.BatchUpdatesEnabled()?bi.StartProcessor(S.PerformAnimatedUpdate(ca,cd,cc.docNode)):function(){S.PerformSyncUpdate(ca,cd,cc.docNode);},cc.updates);};p.Concat=function(ca){var cb;cb=bq.ofSeqNonCopying(ca);return bq.TreeReduce(p.get_Empty(),p.Append,cb);};p.New=b8.Ctor(function(ca,cb){f.New.call(this);this.docNode=ca;this.updates=cb;},p);q.Map=function(ca,cb){return q.CreateLazy(function(){return C.Map(ca,cb());});};q.Const=function(ca){var cb;cb=C.New({$:0,$0:ca});return function(){return cb;};};q.Map2Unit=function(ca,cb){return q.CreateLazy(function(){return C.Map2Unit(ca(),cb());});};q.CreateLazy=function(ca){var cb;cb={c:null,o:ca};return function(){var cc,cd;cc=cb.c;return cc===null?(cc=cb.o(),cb.c=cc,(cd=cc.s,cd!=null&&cd.$==0)?cb.o=null:C.WhenObsoleteRun(cc,function(){cb.c=null;}),cc):cc;};};q.Map2=function(ca,cb,cc){return q.CreateLazy(function(){return C.Map2(ca,cb(),cc());});};q.Bind=function(ca,cb){return q.Join(q.Map(ca,cb));};q.Sink=function(ca,cb){function cc(){C.WhenRun(cb(),ca,function(){bm.scheduler().Fork(cc);});}bm.scheduler().Fork(cc);};q.SnapshotOn=function(ca,cb,cc){var cd;cd=C.New({$:2,$0:ca,$1:[]});return q.CreateLazy(function(){return cd.s==null?C.SnapshotOn(cb(),cc()):(C.WhenObsolete(cb(),cd),cd);});};q.Join=function(ca){return q.CreateLazy(function(){return C.Join(ca());});};r=g.Submitter=b8.Class({Trigger:function(){this["var"].Set(null);}},f,r);r.New=b8.Ctor(function(ca,cb){f.New.call(this);this.input=ca;this["var"]=z.Create();this.view=q.SnapshotOn(cb,this["var"].get_View(),this.input);},r);t.LoadLocalTemplates=function(ca){!t.LocalTemplatesLoaded()?(t.set_LocalTemplatesLoaded(true),t.LoadNestedTemplates(self.document.body,"")):void 0;t.LoadedTemplates().set_Item(ca,t.LoadedTemplateFile(""));};t.LocalTemplatesLoaded=function(){X.$cctor();return X.LocalTemplatesLoaded;};t.set_LocalTemplatesLoaded=function(ca){X.$cctor();X.LocalTemplatesLoaded=ca;};t.LoadNestedTemplates=function(ca,cb){var cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx;function cc(cy){var cz,cA;if(!cd.ContainsKey(cy)){cz=(cA=null,[ce.TryGetValue(cy,{get:function(){return cA;},set:function(cB){cA=cB;}}),cA]);if(cz[0]){cx.SAdd(cy);ce.RemoveKey(cy);t.PrepareTemplateStrict(cb,{$:1,$0:cy},cz[1],{$:1,$0:cc});}else b9.warn(cx.Contains(cy)?"Encountered loop when instantiating "+cy:"Local template does not exist: "+cy);}}cd=t.LoadedTemplateFile(cb);ce=new J.New$5();cf=ca.querySelectorAll("[ws-template]");for(cg=0,ch=cf.length-1;cg<=ch;cg++){ci=cf[cg];cj=ci.getAttribute("ws-template").toLowerCase();ci.removeAttribute("ws-template");ce.set_Item(cj,t.FakeRootSingle(ci));}ck=ca.querySelectorAll("[ws-children-template]");for(cl=0,cm=ck.length-1;cl<=cm;cl++){cn=ck[cl];co=cn.getAttribute("ws-children-template").toLowerCase();cn.removeAttribute("ws-children-template");ce.set_Item(co,t.FakeRoot(cn));}cp=ca.querySelectorAll("template[id]");for(cq=0,cr=cp.length-1;cq<=cr;cq++){cs=cp[cq];ce.set_Item(cs.getAttribute("id").toLowerCase(),t.FakeRootFromHTMLTemplate(cs));}ct=ca.querySelectorAll("template[name]");for(cu=0,cv=ct.length-1;cu<=cv;cu++){cw=ct[cu];ce.set_Item(cw.getAttribute("name").toLowerCase(),t.FakeRootFromHTMLTemplate(cw));}cx=new Z.New$3();while(ce.count>0)cc(T.head(ce.Keys()));};t.LoadedTemplates=function(){X.$cctor();return X.LoadedTemplates;};t.LoadedTemplateFile=function(ca){var cb,cc,cd;cb=(cc=null,[t.LoadedTemplates().TryGetValue(ca,{get:function(){return cc;},set:function(ce){cc=ce;}}),cc]);return cb[0]?cb[1]:(cd=new J.New$5(),(t.LoadedTemplates().set_Item(ca,cd),cd));};t.FakeRootSingle=function(ca){var cb,cc,cd,ce;ca.removeAttribute("ws-template");cb=ca.getAttribute("ws-replace");if(cb==null);else{ca.removeAttribute("ws-replace");cc=ca.parentNode;K.Equals(cc,null)?void 0:(cd=self.document.createElement(ca.tagName),cd.setAttribute("ws-replace",cb),cc.replaceChild(cd,ca));}ce=self.document.createElement("div");ce.appendChild(ca);return ce;};t.FakeRoot=function(ca){var cb;cb=self.document.createElement("div");while(ca.hasChildNodes())cb.appendChild(ca.firstChild);return cb;};t.FakeRootFromHTMLTemplate=function(ca){var cb,cc,cd,ce;cb=self.document.createElement("div");cc=ca.content;for(cd=0,ce=cc.childNodes.length-1;cd<=ce;cd++)cb.appendChild(cc.childNodes[cd].cloneNode(true));return cb;};t.PrepareTemplateStrict=function(ca,cb,cc,cd){var ce,cf;function cg(cm,cn){var co,cp,cq,cr,cs,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO;function ct(cP){}while(true)switch(cm){case 0:if(cn!==null){co=cn.nextSibling;if(K.Equals(cn.nodeType,H.TEXT_NODE))bd.convertTextNode(cn);else if(K.Equals(cn.nodeType,H.ELEMENT_NODE))ci(cn);cn=co;}else return null;break;case 1:cu=be.string(cn.nodeName,{$:1,$0:3},null).toLowerCase();cv=(cp=cu.indexOf("."),cp===-1?[ca,cu]:[be.string(cu,null,{$:1,$0:cp-1}),be.string(cu,{$:1,$0:cp+1},null)]);cw=cv[1];cx=cv[0];if(cx!=""&&!t.LoadedTemplates().ContainsKey(cx))return bd.failNotLoaded(cw);else{if(cx==""&&cd!=null)cd.$0(cw);cy=t.LoadedTemplates().Item(cx);if(!cy.ContainsKey(cw))return bd.failNotLoaded(cw);else{cz=cy.Item(cw);cA=cz.cloneNode(true);cB=new Z.New$3();cC=new J.New$5();cD=cn.attributes;for(cE=0,cF=cD.length-1;cE<=cF;cE++){cG=cD.item(cE).name.toLowerCase();cC.set_Item(cG,(cH=cD.item(cE).nodeValue,cH==""?cG:cH.toLowerCase()));if(!cB.SAdd(cG))b9.warn("Hole mapped twice",cG);}for(cI=0,cJ=cn.childNodes.length-1;cI<=cJ;cI++){cK=cn.childNodes[cI];if(K.Equals(cK.nodeType,H.ELEMENT_NODE))!cB.SAdd(cK.nodeName.toLowerCase())?b9.warn("Hole filled twice",cw):void 0;}cL=cn.childNodes.length===1&&K.Equals(cn.firstChild.nodeType,H.TEXT_NODE);if(cL){cr=bd.fillTextHole(cA,cn.firstChild.textContent,cw);((function(cP){return function(cQ){if(cQ!=null)cP(cQ.$0);};}((cs=function(cP){return function(cQ){return cP.SAdd(cQ);};}(cB),function(cP){return ct(cs(cP));})))(cr));}bd.removeHolesExcept(cA,cB);if(!cL){for(cM=0,cN=cn.childNodes.length-1;cM<=cN;cM++){cO=cn.childNodes[cM];if(K.Equals(cO.nodeType,H.ELEMENT_NODE))cO.hasAttributes()?bd.fillInstanceAttrs(cA,cO):ch(cA,cO);}}bd.mapHoles(cA,cC);bd.fill(cA,cn.parentNode,cn);cn.parentNode.removeChild(cn);return;}}break;}}function ch(cm,cn){var co,cp,cr,cs;function cq(ct,cu){var cv;if(cr=="title"&&cn.hasChildNodes()){cv=W.ParseHTMLIntoFakeRoot(cn.textContent);cn.removeChild(cn.firstChild);while(cv.hasChildNodes())cn.appendChild(cv.firstChild);}else null;ci(cn);return bd.fill(cn,ct,cu);}cr=cn.nodeName.toLowerCase();t.foreachNotPreserved(cm,"[ws-attr-holes]",function(ct){var cu,cv,cw,cx,cy;cu=F.SplitChars(ct.getAttribute("ws-attr-holes"),[" "],1);for(cv=0,cw=cu.length-1;cv<=cw;cv++){cx=Y.get(cu,cv);ct.setAttribute(cx,(cy=new a.RegExp("\\${"+cr+"}","ig"),ct.getAttribute(cx).replace(cy,cn.textContent)));}});cs=cm.querySelector("[ws-hole="+cr+"]");if(K.Equals(cs,null)){co=cm.querySelector("[ws-replace="+cr+"]");return K.Equals(co,null)?(cp=cm.querySelector("slot[name="+cr+"]"),cm.tagName.toLowerCase()=="template"?(cq(cp.parentNode,cp),void cp.parentNode.removeChild(cp)):null):(cq(co.parentNode,co),void co.parentNode.removeChild(co));}else{while(cs.hasChildNodes())cs.removeChild(cs.lastChild);cs.removeAttribute("ws-hole");return cq(cs,null);}}function ci(cm){if(!cm.hasAttribute("ws-preserve"))if(F.StartsWith(cm.nodeName.toLowerCase(),"ws-"))ck(cm);else{bd.convertAttrs(cm);cj(cm.firstChild);}}function cj(cm){return cg(0,cm);}function ck(cm){return cg(1,cm);}function cl(cm){var cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy;while(true){cn=cm.querySelector("[ws-template]");if(K.Equals(cn,null)){co=cm.querySelector("[ws-children-template]");if(K.Equals(co,null)){cp=cm.querySelectorAll("template[id]");for(cq=1,cr=cp.length-1;cq<=cr;cq++){cs=cp[cq];if(ce.Contains(cs));else{t.PrepareTemplateStrict(ca,{$:1,$0:cs.getAttribute("id")},cs,null);ce.SAdd(cs);}}ct=cm.querySelectorAll("template[name]");for(cu=1,cv=ct.length-1;cu<=cv;cu++){cw=ct[cu];if(ce.Contains(cw));else{t.PrepareTemplateStrict(ca,{$:1,$0:cw.getAttribute("name")},cw,null);ce.SAdd(cw);}}return null;}else{cx=co.getAttribute("ws-children-template");co.removeAttribute("ws-children-template");t.PrepareTemplateStrict(ca,{$:1,$0:cx},co,null);cm=cm;}}else{cy=cn.getAttribute("ws-template");(t.PrepareSingleTemplate(ca,{$:1,$0:cy},cn))(null);cm=cm;}}}ce=new Z.New$3();cf=(cb==null?"":cb.$0).toLowerCase();t.LoadedTemplateFile(ca).set_Item(cf,cc);if(cc.hasChildNodes()){cl(cc);cj(cc.firstChild);}};t.foreachNotPreserved=function(ca,cb,cc){W.IterSelector(ca,cb,function(cd){if(cd.closest("[ws-preserve]")==null)cc(cd);});};t.PrepareSingleTemplate=function(ca,cb,cc){var cd;cd=t.FakeRootSingle(cc);return function(ce){t.PrepareTemplateStrict(ca,cb,cd,ce);};};t.TextHoleRE=function(){X.$cctor();return X.TextHoleRE;};u.NewFromSeq=function(ca){var cb,cc,cd;cb={};cc=_9.Get(ca);try{while(cc.MoveNext()){cd=cc.Current();cb[cd[0]]=cd[1];}}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}return cb;};v.Form1={$:0};w.r$1=function(){return M.JSUnion(void 0,[[null,[[null,["Form1"]]],[]],[null,[[null,["Form2"]]],[w.r()]]]);};w.r=function(){return M.JSUnion(void 0,[[null,[[null,["Case1"]]],[M.rString()]],[null,[[null,["Case2"]]],[M.rInt()]]]);};x.InstallHash=function(ca,cb){var cc;cc=z.Create$1(void 0);x.InstallHashInto(cc,ca,cb);return cc;};x.InstallHashInto=function(ca,cb,cc){function cd(cg){return N.Parse(cc,O.FromHash(cg,{$:1,$0:true}));}function ce(){return x.getCurrentHash(cd,cb);}function cf(cg){if(!K.Equals(ca.Get(),cg))ca.Set(cg);}cf(ce());self.addEventListener("popstate",function(){return cf(ce());},false);self.addEventListener("hashchange",function(){return cf(ce());},false);self.document.body.addEventListener("click",function(cg){var ch,ci,cj;ch=(ci=x.findLinkHref(cg.target),ci==null?null:(cj=ci.$0,F.StartsWith(cj,"#")?cd(cj):null));return ch==null?null:(cf(ch.$0),cg.preventDefault());},false);q.Sink(function(cg){var ch;if(!K.Equals(cg,ce())){ch=N.HashLink(cc,cg);self.history.pushState(null,null,ch);}},ca.get_View());};x.getCurrentHash=function(ca,cb){var cc,cd;cc=self.location.hash;cd=ca(cc);return cd==null?((function(ce){return function(cf){return ce("Failed to parse route: "+bl.toSafe(cf));};}(function(ce){b9.log(ce);}))(cc),cb):cd.$0;};x.findLinkHref=function(ca){while(true)if(ca.tagName=="A")return _3.ofObj(ca.getAttribute("href"));else if(ca===self.document.body)return null;else ca=ca.parentNode;};y.Id=function(){(y.lastId())[0]++;return"Form"+a.String((y.lastId())[0]);};y.lastId=function(){_4.$cctor();return _4.lastId;};z=g.Var$1=b8.Class({},f,z);z.Create$1=function(ca){return new Q.New(false,C.New({$:2,$0:ca,$1:[]}),ca);};z.Create=function(){return new Q.New(false,C.New({$:2,$0:null,$1:[]}),null);};B=A.T=b8.Class({GetEnumerator:function(){return new _.New(this,null,function(ca){var cb;cb=ca.s;return cb.$==0?false:(ca.c=cb.$0,ca.s=cb.$1,true);},void 0);}},null,B);B.Empty=new B({$:0});q=g.View=b8.Class({},null,q);C.Map=function(ca,cb){var cc,cd;cc=cb.s;return cc!=null&&cc.$==0?C.New({$:0,$0:ca(cc.$0)}):(cd=C.New({$:3,$0:[],$1:[]}),(C.When(cb,function(ce){C.MarkDone(cd,cb,ca(ce));},cd),cd));};C.Map2Unit=function(ca,cb){var cc,cd,ce;function cf(){var cg,ch,ci;if(!(cg=ce.s,cg!=null&&cg.$==0||cg!=null&&cg.$==2)){ch=C.ValueAndForever(ca);ci=C.ValueAndForever(cb);if(ch!=null&&ch.$==1)ci!=null&&ci.$==1?ch.$0[1]&&ci.$0[1]?C.MarkForever(ce,null):C.MarkReady(ce,null):void 0;}}cc=ca.s;cd=cb.s;return cc!=null&&cc.$==0?cd!=null&&cd.$==0?C.New({$:0,$0:null}):cb:cd!=null&&cd.$==0?ca:(ce=C.New({$:3,$0:[],$1:[]}),(C.When(ca,cf,ce),C.When(cb,cf,ce),ce));};C.WhenObsoleteRun=function(ca,cb){var cc;cc=ca.s;if(cc==null)cb();else cc!=null&&cc.$==2?cc.$1.push(cb):cc!=null&&cc.$==3?cc.$1.push(cb):void 0;};C.When=function(ca,cb,cc){var cd;cd=ca.s;if(cd==null)C.Obsolete(cc);else cd!=null&&cd.$==2?(C.EnqueueSafe(cd.$1,cc),cb(cd.$0)):cd!=null&&cd.$==3?(cd.$0.push(cb),C.EnqueueSafe(cd.$1,cc)):cb(cd.$0);};C.MarkDone=function(ca,cb,cc){var cd;if(cd=cb.s,cd!=null&&cd.$==0)C.MarkForever(ca,cc);else C.MarkReady(ca,cc);};C.Map2=function(ca,cb,cc){var cd,ce,cf;function cg(ch){var ci,cj,ck;if(!(ci=cf.s,ci!=null&&ci.$==0||ci!=null&&ci.$==2)){cj=C.ValueAndForever(cb);ck=C.ValueAndForever(cc);if(cj!=null&&cj.$==1)ck!=null&&ck.$==1?cj.$0[1]&&ck.$0[1]?C.MarkForever(cf,ca(cj.$0[0],ck.$0[0])):C.MarkReady(cf,ca(cj.$0[0],ck.$0[0])):void 0;}}cd=cb.s;ce=cc.s;return cd!=null&&cd.$==0?ce!=null&&ce.$==0?C.New({$:0,$0:ca(cd.$0,ce.$0)}):C.Map2Opt1(ca,cd.$0,cc):ce!=null&&ce.$==0?C.Map2Opt2(ca,ce.$0,cb):(cf=C.New({$:3,$0:[],$1:[]}),(C.When(cb,cg,cf),C.When(cc,cg,cf),cf));};C.ValueAndForever=function(ca){var cb;cb=ca.s;return cb!=null&&cb.$==0?{$:1,$0:[cb.$0,true]}:cb!=null&&cb.$==2?{$:1,$0:[cb.$0,false]}:null;};C.MarkForever=function(ca,cb){var cc,cd,ce,cf;cc=ca.s;if(cc!=null&&cc.$==3){ca.s={$:0,$0:cb};cd=cc.$0;for(ce=0,cf=Y.length(cd)-1;ce<=cf;ce++)(Y.get(cd,ce))(cb);}else void 0;};C.MarkReady=function(ca,cb){var cc,cd,ce,cf;cc=ca.s;if(cc!=null&&cc.$==3){ca.s={$:2,$0:cb,$1:cc.$1};cd=cc.$0;for(ce=0,cf=Y.length(cd)-1;ce<=cf;ce++)(Y.get(cd,ce))(cb);}else void 0;};C.EnqueueSafe=function(ca,cb){var cc,cd,ce,cf;ca.push(cb);if(ca.length%20===0){cc=ca.slice(0);bC.Clear(ca);for(cd=0,ce=Y.length(cc)-1;cd<=ce;cd++){cf=Y.get(cc,cd);if(typeof cf=="object")(function(cg){if(cg.s)ca.push(cg);}(cf));else(function(cg){ca.push(cg);}(cf));}}else void 0;};C.WhenRun=function(ca,cb,cc){var cd;cd=ca.s;if(cd==null)cc();else cd!=null&&cd.$==2?(cd.$1.push(cc),cb(cd.$0)):cd!=null&&cd.$==3?(cd.$0.push(cb),cd.$1.push(cc)):cb(cd.$0);};C.Map2Opt1=function(ca,cb,cc){return C.Map(function(cd){return ca(cb,cd);},cc);};C.Map2Opt2=function(ca,cb,cc){return C.Map(function(cd){return ca(cd,cb);},cc);};C.SnapshotOn=function(ca,cb){var cc;function cd(ce){var cf,cg,ch;if(!(cf=cc.s,cf!=null&&cf.$==0||cf!=null&&cf.$==2)){cg=C.ValueAndForever(ca);ch=C.ValueAndForever(cb);if(cg!=null&&cg.$==1)ch!=null&&ch.$==1?cg.$0[1]||ch.$0[1]?C.MarkForever(cc,ch.$0[0]):C.MarkReady(cc,ch.$0[0]):void 0;}}cc=C.New({$:3,$0:[],$1:[]});C.When(ca,cd,cc);C.WhenReady(cb,cd);return cc;};C.WhenObsolete=function(ca,cb){var cc;cc=ca.s;if(cc==null)C.Obsolete(cb);else cc!=null&&cc.$==2?C.EnqueueSafe(cc.$1,cb):cc!=null&&cc.$==3?C.EnqueueSafe(cc.$1,cb):void 0;};C.Join=function(ca){var cb;cb=C.New({$:3,$0:[],$1:[]});C.When(ca,function(cc){var cd;cd=cc();C.When(cd,function(ce){var cf,cg;if((cf=cd.s,cf!=null&&cf.$==0)&&(cg=ca.s,cg!=null&&cg.$==0))C.MarkForever(cb,ce);else C.MarkReady(cb,ce);},cb);},cb);return cb;};C.WhenReady=function(ca,cb){var cc,cd;cd=ca.s;switch(cd!=null&&cd.$==2?(cc=cd.$0,0):cd==null?1:cd!=null&&cd.$==3?2:(cc=cd.$0,0)){case 0:cb(cc);break;case 1:null;break;case 2:cd.$0.push(cb);break;}};C.Copy=function(ca){var cb,cc,cd;cb=ca.s;return cb==null?ca:cb!=null&&cb.$==2?(cc=C.New({$:2,$0:cb.$0,$1:[]}),(C.WhenObsolete(ca,cc),cc)):cb!=null&&cb.$==3?(cd=C.New({$:3,$0:[],$1:[]}),(C.When(ca,function(ce){C.MarkDone(cd,ca,ce);},cd),cd)):ca;};D=g.AttrProxy=b8.Class({},null,D);D.HandlerImpl=function(ca,cb){return V.Static(function(cc){cc.addEventListener(ca,function(cd){return(cb(cc))(cd);},false);});};D.Create=function(ca,cb){return V.Static(function(cc){cc.setAttribute(ca,cb);});};D.Concat=function(ca){var cb;cb=bq.ofSeqNonCopying(ca);return bq.TreeReduce(V.EmptyAttr(),D.Append,cb);};D.Append=function(ca,cb){return V.AppendTree(ca,cb);};E.TryParseInt32=function(ca,cb){return E.TryParse(ca,-2147483648,2147483647,cb);};F.Trim=function(ca){return ca.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};F.StartsWith=function(ca,cb){return ca.substring(0,cb.length)==cb;};F.concat=function(ca,cb){return Y.ofSeq(cb).join(ca);};F.SplitChars=function(ca,cb,cc){return F.Split(ca,new a.RegExp("["+F.RegexEscape(cb.join(""))+"]"),cc);};F.Substring=function(ca,cb,cc){return ca.substr(cb,cc);};F.Split=function(ca,cb,cc){return cc===1?Y.filter(function(cd){return cd!=="";},F.SplitWith(ca,cb)):F.SplitWith(ca,cb);};F.RegexEscape=function(ca){return ca.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};F.forall=function(ca,cb){return T.forall(ca,F.protect(cb));};F.SplitWith=function(ca,cb){return ca.split(cb);};F.protect=function(ca){return ca==null?"":ca;};F.PadLeftWith=function(ca,cb,cc){return cb>ca.length?a.Array(cb-ca.length+1).join(cc)+ca:ca;};F.IsNullOrEmpty=function(ca){return ca==null||ca=="";};F.Join=function(ca,cb){return cb.join(ca);};J=I.Dictionary=b8.Class({set_Item:function(ca,cb){this.set(ca,cb);},ContainsKey:function(ca){var cb,cc;cb=this;cc=this.data[this.hash(ca)];return cc==null?false:Y.exists(function(cd){return cb.equals.apply(null,[(e.KeyValue(cd))[0],ca]);},cc);},TryGetValue:function(ca,cb){var cc,cd,ce;cc=this;cd=this.data[this.hash(ca)];return cd==null?false:(ce=Y.tryPick(function(cf){var cg;cg=e.KeyValue(cf);return cc.equals.apply(null,[cg[0],ca])?{$:1,$0:cg[1]}:null;},cd),ce!=null&&ce.$==1&&(cb.set(ce.$0),true));},RemoveKey:function(ca){return this.remove(ca);},Keys:function(){return new bf.New(this);},set:function(ca,cb){var cc,cd,ce,cf;cc=this;cd=this.hash(ca);ce=this.data[cd];if(ce==null){this.count=this.count+1;this.data[cd]=new a.Array({K:ca,V:cb});}else{cf=Y.tryFindIndex(function(cg){return cc.equals.apply(null,[(e.KeyValue(cg))[0],ca]);},ce);cf==null?(this.count=this.count+1,ce.push({K:ca,V:cb})):ce[cf.$0]={K:ca,V:cb};}},remove:function(ca){var cb,cc,cd,ce;cb=this;cc=this.hash(ca);cd=this.data[cc];return cd==null?false:(ce=Y.filter(function(cf){return!cb.equals.apply(null,[(e.KeyValue(cf))[0],ca]);},cd),Y.length(ce)<cd.length&&(this.count=this.count-1,this.data[cc]=ce,true));},Item:function(ca){return this.get(ca);},get:function(ca){var cb,cc;cb=this;cc=this.data[this.hash(ca)];return cc==null?ba.notPresent():Y.pick(function(cd){var ce;ce=e.KeyValue(cd);return cb.equals.apply(null,[ce[0],ca])?{$:1,$0:ce[1]}:null;},cc);},GetEnumerator:function(){return _9.Get0(Y.concat(o.GetFieldValues(this.data)));}},f,J);J.New$5=b8.Ctor(function(){J.New$6.call(this,[],K.Equals,K.Hash);},J);J.New$6=b8.Ctor(function(ca,cb,cc){var cd,ce;f.New.call(this);this.equals=cb;this.hash=cc;this.count=0;this.data=[];cd=_9.Get(ca);try{while(cd.MoveNext()){ce=cd.Current();this.set(ce.K,ce.V);}}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}},J);K.Equals=function(ca,cb){var cc,cd,ce,cf;if(ca===cb)return true;else{cc=typeof ca;if(cc=="object"){if(ca===null||ca===void 0||cb===null||cb===void 0||!K.Equals(typeof cb,"object"))return false;else if("Equals"in ca)return ca.Equals(cb);else if("Equals"in cb)return false;else if(ca instanceof a.Array&&cb instanceof a.Array)return K.arrayEquals(ca,cb);else if(ca instanceof a.Date&&cb instanceof a.Date)return K.dateEquals(ca,cb);else{cd=[true];for(var cg in ca)if(function(ch){cd[0]=!ca.hasOwnProperty(ch)||cb.hasOwnProperty(ch)&&K.Equals(ca[ch],cb[ch]);return!cd[0];}(cg))break;if(cd[0]){for(var ch in cb)if(function(ci){cd[0]=!cb.hasOwnProperty(ci)||ca.hasOwnProperty(ci);return!cd[0];}(ch))break;}return cd[0];}}else return cc=="function"&&("$Func"in ca?ca.$Func===cb.$Func&&ca.$Target===cb.$Target:"$Invokes"in ca&&"$Invokes"in cb&&K.arrayEquals(ca.$Invokes,cb.$Invokes));}};K.arrayEquals=function(ca,cb){var cc,cd;if(Y.length(ca)===Y.length(cb)){cc=true;cd=0;while(cc&&cd<Y.length(ca)){!K.Equals(Y.get(ca,cd),Y.get(cb,cd))?cc=false:void 0;cd=cd+1;}return cc;}else return false;};K.dateEquals=function(ca,cb){return ca.getTime()===cb.getTime();};K.Hash=function(ca){var cb;cb=typeof ca;return cb=="function"?0:cb=="boolean"?ca?1:0:cb=="number"?ca:cb=="string"?K.hashString(ca):cb=="object"?ca==null?0:ca instanceof a.Array?K.hashArray(ca):K.hashObject(ca):0;};K.hashString=function(ca){var cb,cc,cd;if(ca===null)return 0;else{cb=5381;for(cc=0,cd=ca.length-1;cc<=cd;cc++)cb=K.hashMix(cb,ca[cc].charCodeAt());return cb;}};K.hashArray=function(ca){var cb,cc,cd;cb=-34948909;for(cc=0,cd=Y.length(ca)-1;cc<=cd;cc++)cb=K.hashMix(cb,K.Hash(Y.get(ca,cc)));return cb;};K.hashObject=function(ca){var cb,cc;if("GetHashCode"in ca)return ca.GetHashCode();else{cb=[0];for(var cd in ca)if(function(ce){cb[0]=K.hashMix(K.hashMix(cb[0],K.hashString(ce)),K.Hash(ca[ce]));return false;}(cd))break;return cb[0];}};K.hashMix=function(ca,cb){return(ca<<5)+ca+cb;};K.Compare=function(ca,cb){var cc,cd,ce,cf,cg,ch;if(ca===cb)return 0;else{cd=typeof ca;switch(cd=="function"?1:cd=="boolean"?2:cd=="number"?2:cd=="string"?2:cd=="object"?3:0){case 0:return typeof cb=="undefined"?0:-1;case 1:return e.FailWith("Cannot compare function values.");case 2:return ca<cb?-1:1;case 3:if(ca===null)ce=-1;else if(cb===null)ce=1;else if("CompareTo"in ca)ce=ca.CompareTo(cb);else if("CompareTo0"in ca)ce=ca.CompareTo0(cb);else if(ca instanceof a.Array&&cb instanceof a.Array)ce=K.compareArrays(ca,cb);else if(ca instanceof a.Date&&cb instanceof a.Date)ce=K.compareDates(ca,cb);else{cf=[0];for(var ci in ca)if(function(cj){return!ca.hasOwnProperty(cj)?false:!cb.hasOwnProperty(cj)?(cf[0]=1,true):(cf[0]=K.Compare(ca[cj],cb[cj]),cf[0]!==0);}(ci))break;if(cf[0]===0){for(var cj in cb)if(function(ck){return!cb.hasOwnProperty(ck)?false:!ca.hasOwnProperty(ck)&&(cf[0]=-1,true);}(cj))break;}ce=cf[0];}return ce;}}};K.compareArrays=function(ca,cb){var cc,cd;if(Y.length(ca)<Y.length(cb))return -1;else if(Y.length(ca)>Y.length(cb))return 1;else{cc=0;cd=0;while(cc===0&&cd<Y.length(ca)){cc=K.Compare(Y.get(ca,cd),Y.get(cb,cd));cd=cd+1;}return cc;}};K.compareDates=function(ca,cb){return K.Compare(ca.getTime(),cb.getTime());};M.JSUnion=function(ca,cb){var cc;function cd(ch){var ci;function cj(ck){return ck!=null&&ck.$==1&&K.Equals(ch,ck.$0);}ci=T.tryFindIndex(function(ck){return cj(ck[0]);},cb);return ci!=null&&ci.$==1?ci.$0:ch.$;}function ce(ch,ci){return Y.init(Y.length((Y.get(cb,ch))[2]),function(cj){return ci["$"+a.String(cj)];});}function cf(ch,ci){var cj,ck,cl;cj=ca==null?{}:new ca();ck=Y.get(cb,ch);return(cl=ck[0],cl!=null&&cl.$==1)?ck[0].$0:(cj.$=ch,T.iteri(function(cm,cn){cj["$"+a.String(cm)]=cn;},ci),cj);}function cg(ch,ci){var cj;function ck(cl,cm){return[ch,cl,cm,cj];}cj=ci[2];return T.map(function(cl){return ck(cl[0],cl[1]);},ci[1]);}cc=Y.ofSeq(T.collect(function(ch){return cg(ch[0],ch[1]);},T.indexed(cb)));return _1.New$1(function(ch){function ci(cj,ck,cl,cm){var cn,co,cp;function cq(cr){return function(cs){return function(ct){var cu;function cv(cw,cx){return((cq(cu))(cw))(new B({$:1,$0:cx,$1:ct}));}return cr.$==1?(cu=cr.$1,T.collect(function(cw){return cv(cw[0],cw[1]);},cr.$0.Parse(cs))):[[cs,cf(cj,Y.ofList(A.rev(ct)))]];};};}return M.isCorrectMethod(ck,ch.Method)?(cn=_2.startsWith(A.ofArray(cl),ch.Segments),cn==null?[]:(co=cn.$0,(cp=A.ofArray(cm),cp.$==0?[[O.New(co,ch.QueryArgs,ch.FormData,ch.Method,ch.Body),cf(cj,[])]]:((cq(cp))(O.New(co,ch.QueryArgs,ch.FormData,ch.Method,ch.Body)))(B.Empty)))):[];}return T.collect(function(cj){return ci(cj[0],cj[1],cj[2],cj[3]);},cc);},function(ch){var ci,cj,ck,cl,cm,cn;function co(cp,cq){return cq.Write(cp);}ci=cd(ch);cj=Y.get(cb,ci);ck=cj[2];cl=Y.get(cj[1],0);cm=[O.Segment(A.ofArray(cl[1]),cl[0])];return ck.length==0?{$:1,$0:cm}:(cn=(((b8.Curried3(Y.map2))(co))(ce(ci,ch)))(ck),Y.forall(function(cp){return cp!=null;},cn)?{$:1,$0:T.append(cm,T.collect(function(cp){return cp.$0;},cn))}:null);});};M.isCorrectMethod=function(ca,cb){return cb!=null&&cb.$==1?ca!=null&&ca.$==1?K.Equals(cb.$0,ca.$0):true:!(ca!=null&&ca.$==1);};M.rString=function(){bA.$cctor();return bA.rString;};M.rInt=function(){bA.$cctor();return bA.rInt;};N.Parse=function(ca,cb){function cc(cd,ce){return cd.Segments.$==0?{$:1,$0:ce}:null;}return T.tryPick(function(cd){return cc(cd[0],cd[1]);},ca.Parse(cb));};N.HashLink=function(ca,cb){return"#"+N.Link(ca,cb);};N.Link=function(ca,cb){var cc;cc=N.Write(ca,cb);return cc==null?"":cc.$0.ToLink();};N.Write=function(ca,cb){var cc;cc=ca.Write(cb);return cc==null?null:{$:1,$0:O.Combine(cc.$0)};};O=L.Route=b8.Class({ToLink:function(){return bP.WriteLink(this.Segments,this.QueryArgs);}},null,O);O.FromHash=function(ca,cb){var cc,cd;cc=ca.indexOf("#");return cc===-1?O.get_Empty():(cd=ca.substring(cc+1),cb!=null&&cb.$0?cd==""||cd=="/"?O.get_Empty():F.StartsWith(cd,"/")?O.FromUrl(cd.substring(1),{$:1,$0:true}):O.Segment$2(cd):O.FromUrl(ca.substring(cc),{$:1,$0:false}));};O.Segment=function(ca,cb){var cc;cc=O.get_Empty();return O.New(ca,cc.QueryArgs,cc.FormData,cb,cc.Body);};O.get_Empty=function(){return O.New(B.Empty,new bj.New([]),new bj.New([]),null,{$:1,$0:null});};O.FromUrl=function(ca,cb){var cc,cd,ce;cc=(cd=ca.indexOf("?"),cd===-1?[ca,new bj.New([])]:[F.Substring(ca,0,cd),O.ParseQuery(ca.substring(cd+1))]);ce=O.get_Empty();return O.New(A.ofArray(F.SplitChars(cc[0],["/"],cb!=null&&cb.$0?0:1)),cc[1],ce.FormData,ce.Method,ce.Body);};O.Segment$2=function(ca){var cb;cb=O.get_Empty();return O.New(A.ofArray([ca]),cb.QueryArgs,cb.FormData,cb.Method,cb.Body);};O.ParseQuery=function(ca){return bk.OfArray(Y.ofSeq(Y.choose(function(cb){var cc,cd;cc=F.SplitChars(cb,["="],0);return!K.Equals(cc,null)&&cc.length===2?(cd=Y.get(cc,1),{$:1,$0:[Y.get(cc,0),cd]}):((function(ce){return function(cf){return ce("wrong format for query argument: "+bl.toSafe(cf));};}(function(ce){b9.log(ce);}))(cb),null);},F.SplitChars(ca,["&"],0))));};O.Combine=function(ca){var cb,cc,cd,ce,cf,cg,ch;cb=Y.ofSeq(ca);cc=Y.length(cb);return cc===0?O.get_Empty():cc===1?Y.get(cb,0):(cd=null,ce=null,cf=[],cg=new bj.New([]),ch=new bj.New([]),Y.iter(function(ci){var cj,ck;cj=ci.Method;if(cj!=null&&cj.$==1)cd=cj;ck=ci.Body;if(ck==null);else ce=ck;cg=bk.FoldBack(function(cl,cm,cn){return cn.Add$1(cl,cm);},cg,ci.QueryArgs);ch=bk.FoldBack(function(cl,cm,cn){return cn.Add$1(cl,cm);},ch,ci.FormData);A.iter(function(cl){cf.push(cl);},ci.Segments);},cb),O.New(A.ofSeq(cf),cg,ch,cd,ce));};O.New=function(ca,cb,cc,cd,ce){return new O({Segments:ca,QueryArgs:cb,FormData:cc,Method:cd,Body:ce});};P.Apply=function(ca,cb){return ca.$==0?cb.$==0?{$:0,$0:ca.$0(cb.$0)}:{$:1,$0:cb.$0}:cb.$==0?{$:1,$0:ca.$0}:{$:1,$0:A.append(ca.$0,cb.$0)};};P.Map=function(ca,cb){return cb.$==1?{$:1,$0:cb.$0}:{$:0,$0:ca(cb.$0)};};Q=g.ConcreteVar=b8.Class({get_View:function(){return this.view;},Set:function(ca){if(this.isConst)(function(cb){return cb("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(cb){b9.log(cb);}));else{C.Obsolete(this.snap);this.current=ca;this.snap=C.New({$:2,$0:ca,$1:[]});}},get_Id:function(){return"uinref"+a.String(this.id);},Get:function(){return this.current;},UpdateMaybe:function(ca){var cb;cb=ca(this.Get());if(cb!=null&&cb.$==1)this.Set(cb.$0);}},h,Q);Q.New=b8.Ctor(function(ca,cb,cc){var cd;cd=this;h.New.call(this);this.isConst=ca;this.current=cc;this.snap=cb;this.view=function(){return cd.snap;};this.id=_6.Int();},Q);R=i.ErrorMessage=b8.Class({},f,R);C.Obsolete=function(ca){var cb,cc,cd,ce,cf;cc=ca.s;if(cc==null||(cc!=null&&cc.$==2?(cb=cc.$1,false):cc!=null&&cc.$==3?(cb=cc.$1,false):true))void 0;else{ca.s=null;for(cd=0,ce=Y.length(cb)-1;cd<=ce;cd++){cf=Y.get(cb,cd);if(typeof cf=="object")(function(cg){C.Obsolete(cg);}(cf));else cf();}}};C.New=function(ca){return{s:ca};};S.CreateEmbedNode=function(){return{Current:null,Dirty:false};};S.UpdateEmbedNode=function(ca,cb){ca.Current=cb;ca.Dirty=true;};S.LinkElement=function(ca,cb){S.InsertDoc(ca,cb,null);};S.InsertDoc=function(ca,cb,cc){var cd,ce,cf;while(true)if(cb!=null&&cb.$==1)return S.InsertNode(ca,cb.$0.El,cc);else if(cb!=null&&cb.$==2){cd=cb.$0;cd.Dirty=false;cb=cd.Current;}else if(cb==null)return cc;else if(cb!=null&&cb.$==4)return S.InsertNode(ca,cb.$0.Text,cc);else if(cb!=null&&cb.$==5)return S.InsertNode(ca,cb.$0,cc);else if(cb!=null&&cb.$==6)return Y.foldBack(function(cg,ch){return(((b8.Curried3(function(ci,cj,ck){return cj==null||cj.constructor===bc?S.InsertDoc(ci,cj,ck):S.InsertNode(ci,cj,ck);}))(ca))(cg))(ch);},cb.$0.Els,cc);else{ce=cb.$1;cf=cb.$0;cb=cf;cc=S.InsertDoc(ca,ce,cc);}};S.CreateRunState=function(ca,cb){return bt.New(bu.get_Empty(),S.CreateElemNode(ca,V.EmptyAttr(),cb));};S.PerformAnimatedUpdate=function(ca,cb,cc){var cd;return bg.get_UseAnimations()?(cd=null,bm.Delay(function(){var ce,cf,cg;ce=bu.FindAll(cc);cf=S.ComputeChangeAnim(cb,ce);cg=S.ComputeEnterAnim(cb,ce);return bm.Bind(bg.Play(bg.Append(cf,S.ComputeExitAnim(cb,ce))),function(){return bm.Bind(S.SyncElemNodesNextFrame(ca,cb),function(){return bm.Bind(bg.Play(cg),function(){cb.PreviousNodes=ce;return bm.Return(null);});});});})):S.SyncElemNodesNextFrame(ca,cb);};S.PerformSyncUpdate=function(ca,cb,cc){var cd;cd=bu.FindAll(cc);S.SyncElemNode(ca,cb.Top);cb.PreviousNodes=cd;};S.InsertNode=function(ca,cb,cc){W.InsertAt(ca,cc,cb);return cb;};S.CreateElemNode=function(ca,cb,cc){var cd;S.LinkElement(ca,cc);cd=V.Insert(ca,cb);return _7.New(cd,cc,null,ca,_6.Int(),b8.GetOptional(cd.OnAfterRender));};S.SyncElemNodesNextFrame=function(ca,cb){function cc(cd){a.requestAnimationFrame(function(){S.SyncElemNode(ca,cb.Top);cd();});}return bh.BatchUpdatesEnabled()?bm.FromContinuations(function(cd,ce,cf){return cc.apply(null,[cd,ce,cf]);}):(S.SyncElemNode(ca,cb.Top),bm.Return(null));};S.ComputeExitAnim=function(ca,cb){return bg.Concat(Y.map(function(cc){return V.GetExitAnim(cc.Attr);},bu.ToArray(bu.Except(cb,bu.Filter(function(cc){return V.HasExitAnim(cc.Attr);},ca.PreviousNodes)))));};S.ComputeEnterAnim=function(ca,cb){return bg.Concat(Y.map(function(cc){return V.GetEnterAnim(cc.Attr);},bu.ToArray(bu.Except(ca.PreviousNodes,bu.Filter(function(cc){return V.HasEnterAnim(cc.Attr);},cb)))));};S.ComputeChangeAnim=function(ca,cb){var cc;function cd(ce){return V.HasChangeAnim(ce.Attr);}cc=function(ce){return bu.Filter(cd,ce);};return bg.Concat(Y.map(function(ce){return V.GetChangeAnim(ce.Attr);},bu.ToArray(bu.Intersect(cc(ca.PreviousNodes),cc(cb)))));};S.SyncElemNode=function(ca,cb){!ca?S.SyncElement(cb):void 0;S.Sync(cb.Children);S.AfterRender(cb);};S.SyncElement=function(ca){function cb(cc){function cd(ce){var cf,cg,ch,ci;while(true){if(ce!=null&&ce.$==0){cg=ce.$1;ch=ce.$0;if(cd(ch))return true;else ce=cg;}else if(ce!=null&&ce.$==2){ci=ce.$0;if(ci.Dirty)return true;else ce=ci.Current;}else return ce!=null&&ce.$==6&&(cf=ce.$0,cf.Dirty||Y.exists(cb,cf.Holes));}}return cd(cc.Children);}V.Sync(ca.El,ca.Attr);if(cb(ca))S.DoSyncElement(ca);};S.Sync=function(ca){var cb,cc,cd,ce,cf;while(true){if(ca!=null&&ca.$==1)return S.SyncElemNode(false,ca.$0);else if(ca!=null&&ca.$==2){cd=ca.$0;ca=cd.Current;}else if(ca==null)return null;else if(ca!=null&&ca.$==5)return null;else if(ca!=null&&ca.$==4){cb=ca.$0;return cb.Dirty?(cb.Text.nodeValue=cb.Value,cb.Dirty=false):null;}else if(ca!=null&&ca.$==6){cc=ca.$0;Y.iter(function(cg){S.SyncElemNode(false,cg);},cc.Holes);Y.iter(function(cg){V.Sync(cg[0],cg[1]);},cc.Attrs);return S.AfterRender(cc);}else{ce=ca.$1;cf=ca.$0;S.Sync(cf);ca=ce;}}};S.AfterRender=function(ca){var cb;cb=b8.GetOptional(ca.Render);if(cb!=null&&cb.$==1){cb.$0(ca.El);b8.SetOptional(ca,"Render",null);}};S.DoSyncElement=function(ca){var cb,cc,cd;function ce(cf,cg){var ch,ci,cj,ck;while(true){if(cf!=null&&cf.$==1)return cf.$0.El;else if(cf!=null&&cf.$==2){ci=cf.$0;if(ci.Dirty){ci.Dirty=false;return S.InsertDoc(cb,ci.Current,cg);}else cf=ci.Current;}else if(cf==null)return cg;else if(cf!=null&&cf.$==4)return cf.$0.Text;else if(cf!=null&&cf.$==5)return cf.$0;else if(cf!=null&&cf.$==6){ch=cf.$0;ch.Dirty?ch.Dirty=false:void 0;return Y.foldBack(function(cl,cm){return cl==null||cl.constructor===bc?ce(cl,cm):cl;},ch.Els,cg);}else{cj=cf.$1;ck=cf.$0;cf=ck;cg=ce(cj,cg);}}}cb=ca.El;b1.Iter((cc=ca.El,function(cf){W.RemoveNode(cc,cf);}),b1.Except(b1.DocChildren(ca),b1.Children(ca.El,b8.GetOptional(ca.Delimiters))));ce(ca.Children,(cd=b8.GetOptional(ca.Delimiters),cd!=null&&cd.$==1?cd.$0[1]:null));};T.append=function(ca,cb){return{GetEnumerator:function(){var cc,cd;cc=_9.Get(ca);cd=[true];return new _.New(cc,null,function(ce){var cf;return ce.s.MoveNext()?(ce.c=ce.s.Current(),true):(cf=ce.s,!K.Equals(cf,null)?cf.Dispose():void 0,ce.s=null,cd[0]&&(cd[0]=false,ce.s=_9.Get(cb),ce.s.MoveNext()?(ce.c=ce.s.Current(),true):(ce.s.Dispose(),ce.s=null,false)));},function(ce){var cf;cf=ce.s;if(!K.Equals(cf,null))cf.Dispose();});}};};T.head=function(ca){var cb;cb=_9.Get(ca);try{return cb.MoveNext()?cb.Current():T.insufficient();}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}};T.iteri=function(ca,cb){var cc,cd;cc=0;cd=_9.Get(cb);try{while(cd.MoveNext()){ca(cc,cd.Current());cc=cc+1;}}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}};T.collect=function(ca,cb){return T.concat(T.map(ca,cb));};T.indexed=function(ca){return T.mapi(function(cb,cc){return[cb,cc];},ca);};T.map=function(ca,cb){return{GetEnumerator:function(){var cc;cc=_9.Get(cb);return new _.New(null,null,function(cd){return cc.MoveNext()&&(cd.c=ca(cc.Current()),true);},function(){cc.Dispose();});}};};T.tryFindIndex=function(ca,cb){var cc,cd,ce;cc=_9.Get(cb);try{cd=true;ce=0;while(cd&&cc.MoveNext())if(ca(cc.Current()))cd=false;else ce=ce+1;return cd?null:{$:1,$0:ce};}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}};T.tryPick=function(ca,cb){var cc,cd;cc=_9.Get(cb);try{cd=null;while(K.Equals(cd,null)&&cc.MoveNext())cd=ca(cc.Current());return cd;}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}};T.concat=function(ca){return{GetEnumerator:function(){var cb;function cc(cd){var ce;while(true){ce=cd.s;if(K.Equals(ce,null)){if(cb.MoveNext()){cd.s=_9.Get(cb.Current());cd=cd;}else{cb.Dispose();return false;}}else if(ce.MoveNext()){cd.c=ce.Current();return true;}else{cd.Dispose();cd.s=null;cd=cd;}}}cb=_9.Get(ca);return new _.New(null,null,cc,function(cd){var ce;ce=cd.s;if(!K.Equals(ce,null))ce.Dispose();if(!K.Equals(cb,null))cb.Dispose();});}};};T.mapi=function(ca,cb){return T.map2(ca,T.initInfinite(a.id),cb);};T.fold=function(ca,cb,cc){var cd,ce;cd=cb;ce=_9.Get(cc);try{while(ce.MoveNext())cd=ca(cd,ce.Current());return cd;}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}};T.map2=function(ca,cb,cc){return{GetEnumerator:function(){var cd,ce;cd=_9.Get(cb);ce=_9.Get(cc);return new _.New(null,null,function(cf){return cd.MoveNext()&&ce.MoveNext()&&(cf.c=ca(cd.Current(),ce.Current()),true);},function(){cd.Dispose();ce.Dispose();});}};};T.initInfinite=function(ca){return{GetEnumerator:function(){return new _.New(0,null,function(cb){cb.c=ca(cb.s);cb.s=cb.s+1;return true;},void 0);}};};T.delay=function(ca){return{GetEnumerator:function(){return _9.Get(ca());}};};T.forall2=function(ca,cb,cc){return!T.exists2(function(cd,ce){return!ca(cd,ce);},cb,cc);};T.init=function(ca,cb){return T.take(ca,T.initInfinite(cb));};T.iter=function(ca,cb){var cc;cc=_9.Get(cb);try{while(cc.MoveNext())ca(cc.Current());}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}};T.exists2=function(ca,cb,cc){var cd,ce,cf,cg;cd=_9.Get(cb);try{cf=_9.Get(cc);try{cg=false;while(!cg&&cd.MoveNext()&&cf.MoveNext())cg=ca(cd.Current(),cf.Current());ce=cg;}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}return ce;}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}};T.rev=function(ca){return T.delay(function(){return Y.ofSeq(ca).slice().reverse();});};T.distinctBy=function(ca,cb){return{GetEnumerator:function(){var cc,cd;cc=_9.Get(cb);cd=new Z.New$3();return new _.New(null,null,function(ce){var cf,cg;if(cc.MoveNext()){cf=cc.Current();cg=cd.SAdd(ca(cf));while(!cg&&cc.MoveNext()){cf=cc.Current();cg=cd.SAdd(ca(cf));}return cg&&(ce.c=cf,true);}else return false;},function(){cc.Dispose();});}};};T.forall=function(ca,cb){return!T.exists(function(cc){return!ca(cc);},cb);};T.take=function(ca,cb){ca<0?T.nonNegative():void 0;return{GetEnumerator:function(){var cc;cc=[_9.Get(cb)];return new _.New(0,null,function(cd){var ce;cd.s=cd.s+1;return cd.s>ca?false:(ce=cc[0],K.Equals(ce,null)?T.insufficient():ce.MoveNext()?(cd.c=ce.Current(),cd.s===ca?(ce.Dispose(),cc[0]=null):void 0,true):(ce.Dispose(),cc[0]=null,T.insufficient()));},function(){var cd;cd=cc[0];if(!K.Equals(cd,null))cd.Dispose();});}};};T.max=function(ca){var cb,cc,cd;cb=_9.Get(ca);try{if(!cb.MoveNext())T.seqEmpty();cc=cb.Current();while(cb.MoveNext()){cd=cb.Current();if(K.Compare(cd,cc)===1)cc=cd;}return cc;}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}};T.distinct=function(ca){return T.distinctBy(a.id,ca);};T.exists=function(ca,cb){var cc,cd;cc=_9.Get(cb);try{cd=false;while(!cd&&cc.MoveNext())cd=ca(cc.Current());return cd;}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}};T.seqEmpty=function(){return e.FailWith("The input sequence was empty.");};T.unfold=function(ca,cb){return{GetEnumerator:function(){return new _.New(cb,null,function(cc){var cd;cd=ca(cc.s);return cd==null?false:(cc.c=cd.$0[0],cc.s=cd.$0[1],true);},void 0);}};};T.compareWith=function(ca,cb,cc){var cd,ce,cf,cg,ch;cd=_9.Get(cb);try{cf=_9.Get(cc);try{cg=0;ch=true;while(ch&&cg===0)if(cd.MoveNext())cg=cf.MoveNext()?ca(cd.Current(),cf.Current()):1;else if(cf.MoveNext())cg=-1;else ch=false;ce=cg;}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}return ce;}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}};U.IntValueUnchecked=function(ca){return U.ValueWith($.IntApplyUnchecked(),ca);};U.Value=function(ca){return U.ValueWith($.StringApply(),ca);};U.ValueWith=function(ca,cb){var cc;cc=ca(cb);return D.Append(V.Static(cc[0]),U.DynamicCustom(cc[1],cc[2]));};U.DynamicCustom=function(ca,cb){return V.Dynamic(cb,ca);};V.Static=function(ca){return new D({$:3,$0:ca});};V.EmptyAttr=function(){br.$cctor();return br.EmptyAttr;};V.Updates=function(ca){return bq.MapTreeReduce(function(cb){return cb.NChanged();},q.Const(),q.Map2Unit,ca.DynNodes);};V.AppendTree=function(ca,cb){var cc;return ca===null?cb:cb===null?ca:(cc=new D({$:2,$0:ca,$1:cb}),(V.SetFlags(cc,V.Flags(ca)|V.Flags(cb)),cc));};V.Dynamic=function(ca,cb){return new D({$:1,$0:new bR.New(ca,cb)});};V.Insert=function(ca,cb){var cc,cd,ce;function cf(cg){var ch,ci;while(true)if(!(cg===null)){if(cg!=null&&cg.$==1)return cc.push(cg.$0);else if(cg!=null&&cg.$==2){ch=cg.$1;ci=cg.$0;cf(ci);cg=ch;}else return cg!=null&&cg.$==3?cg.$0(ca):cg!=null&&cg.$==4?cd.push(cg.$0):null;}else return null;}cc=[];cd=[];cf(cb);ce=cc.slice(0);return bo.New(ca,V.Flags(cb),ce,cd.length===0?null:{$:1,$0:function(cg){T.iter(function(ch){ch(cg);},cd);}});};V.HasExitAnim=function(ca){var cb;cb=2;return(ca.DynFlags&cb)===cb;};V.GetExitAnim=function(ca){return V.GetAnim(ca,function(cb,cc){return cb.NGetExitAnim(cc);});};V.HasEnterAnim=function(ca){var cb;cb=1;return(ca.DynFlags&cb)===cb;};V.GetEnterAnim=function(ca){return V.GetAnim(ca,function(cb,cc){return cb.NGetEnterAnim(cc);});};V.HasChangeAnim=function(ca){var cb;cb=4;return(ca.DynFlags&cb)===cb;};V.GetChangeAnim=function(ca){return V.GetAnim(ca,function(cb,cc){return cb.NGetChangeAnim(cc);});};V.SetFlags=function(ca,cb){ca.flags=cb;};V.Flags=function(ca){return ca!==null&&ca.hasOwnProperty("flags")?ca.flags:0;};V.GetAnim=function(ca,cb){return bg.Concat(Y.map(function(cc){return cb(cc,ca.DynElem);},ca.DynNodes));};V.Sync=function(ca,cb){Y.iter(function(cc){cc.NSync(ca);},cb.DynNodes);};W.ParseHTMLIntoFakeRoot=function(ca){var cb,cc,cd,ce,cf;function cg(ch,ci){var cj;while(true)if(ci===0)return ch;else{cj=ci;ch=ch.lastChild;ci=cj-1;}}cb=self.document.createElement("div");return!W.rhtml().test(ca)?(cb.appendChild(self.document.createTextNode(ca)),cb):(cc=(cd=W.rtagName().exec(ca),K.Equals(cd,null)?"":Y.get(cd,1).toLowerCase()),(ce=(cf=(W.wrapMap())[cc],cf?cf:W.defaultWrap()),(cb.innerHTML=ce[1]+ca.replace(W.rxhtmlTag(),"<$1></$2>")+ce[2],cg(cb,ce[0]))));};W.rhtml=function(){bG.$cctor();return bG.rhtml;};W.wrapMap=function(){bG.$cctor();return bG.wrapMap;};W.defaultWrap=function(){bG.$cctor();return bG.defaultWrap;};W.rxhtmlTag=function(){bG.$cctor();return bG.rxhtmlTag;};W.rtagName=function(){bG.$cctor();return bG.rtagName;};W.IterSelector=function(ca,cb,cc){var cd,ce,cf;cd=ca.querySelectorAll(cb);for(ce=0,cf=cd.length-1;ce<=cf;ce++)cc(cd[ce]);};W.InsertAt=function(ca,cb,cc){var cd;if(!(cc.parentNode===ca&&cb===(cd=cc.nextSibling,K.Equals(cd,null)?null:cd)))ca.insertBefore(cc,cb);};W.RemoveNode=function(ca,cb){if(cb.parentNode===ca)ca.removeChild(cb);};X.$cctor=function(){X.$cctor=a.ignore;X.LoadedTemplates=new J.New$5();X.LocalTemplatesLoaded=false;X.GlobalHoles=new J.New$5();X.TextHoleRE="\\${([^}]+)}";X.RenderedFullDocTemplate=null;};Y.get=function(ca,cb){Y.checkBounds(ca,cb);return ca[cb];};Y.checkBounds=function(ca,cb){if(cb<0||cb>=ca.length)e.FailWith("Index was outside the bounds of the array.");};Y.length=function(ca){return ca.dims===2?ca.length*ca.length:ca.length;};Y.set=function(ca,cb,cc){Y.checkBounds(ca,cb);ca[cb]=cc;};Z=I.HashSet=b8.Class({SAdd:function(ca){return this.add(ca);},Contains:function(ca){var cb;cb=this.data[this.hash(ca)];return cb==null?false:this.arrContains(ca,cb);},add:function(ca){var cb,cc;cb=this.hash(ca);cc=this.data[cb];return cc==null?(this.data[cb]=[ca],this.count=this.count+1,true):this.arrContains(ca,cc)?false:(cc.push(ca),this.count=this.count+1,true);},arrContains:function(ca,cb){var cc,cd,ce,cf;cc=true;cd=0;cf=cb.length;while(cc&&cd<cf)if(this.equals.apply(null,[cb[cd],ca]))cc=false;else cd=cd+1;return!cc;},GetEnumerator:function(){return _9.Get(bZ.concat(this.data));},ExceptWith:function(ca){var cb;cb=_9.Get(ca);try{while(cb.MoveNext())this.Remove(cb.Current());}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}},Count:function(){return this.count;},IntersectWith:function(ca){var cb,cc,cd,ce,cf;cb=new Z.New$4(ca,this.equals,this.hash);cc=bZ.concat(this.data);for(cd=0,ce=cc.length-1;cd<=ce;cd++){cf=cc[cd];if(!cb.Contains(cf))this.Remove(cf);}},Remove:function(ca){var cb;cb=this.data[this.hash(ca)];return cb==null?false:this.arrRemove(ca,cb)&&(this.count=this.count-1,true);},CopyTo:function(ca,cb){var cc,cd,ce;cc=bZ.concat(this.data);for(cd=0,ce=cc.length-1;cd<=ce;cd++)Y.set(ca,cd+cb,cc[cd]);},arrRemove:function(ca,cb){var cc,cd,ce,cf;cc=true;cd=0;cf=cb.length;while(cc&&cd<cf)if(this.equals.apply(null,[cb[cd],ca])){cb.splice.apply(cb,[cd,1]);cc=false;}else cd=cd+1;return!cc;}},f,Z);Z.New$3=b8.Ctor(function(){Z.New$4.call(this,[],K.Equals,K.Hash);},Z);Z.New$4=b8.Ctor(function(ca,cb,cc){var cd;f.New.call(this);this.equals=cb;this.hash=cc;this.data=[];this.count=0;cd=_9.Get(ca);try{while(cd.MoveNext())this.add(cd.Current());}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}},Z);Z.New$2=b8.Ctor(function(ca){Z.New$4.call(this,ca,K.Equals,K.Hash);},Z);_1.New$1=function(ca,cb){return{Parse:ca,Write:cb};};_2.startsWith=function(ca,cb){var cc;switch(ca.$==1?cb.$==1?K.Equals(ca.$0,cb.$0)?(cc=[cb.$0,cb.$1,ca.$0,ca.$1],1):2:2:0){case 0:return{$:1,$0:cb};case 1:return _2.startsWith(cc[3],cc[1]);case 2:return null;}};A.ofArray=function(ca){var cb,cc,cd;cb=B.Empty;for(cc=Y.length(ca)-1,cd=0;cc>=cd;cc--)cb=new B({$:1,$0:Y.get(ca,cc),$1:cb});return cb;};A.rev=function(ca){var cb,cc;cb=B.Empty;cc=ca;while(cc.$==1){cb=new B({$:1,$0:cc.$0,$1:cb});cc=cc.$1;}return cb;};A.append=function(ca,cb){var cc,cd,ce,cf,cg;if(ca.$==0)return cb;else if(cb.$==0)return ca;else{cf=new B({$:1});cc=cf;cd=ca;ce=true;while(ce){cc.$0=cd.$0;cd=cd.$1;if(cd.$==0)ce=false;else cc=(cg=new B({$:1}),cc.$1=cg,cg);}cc.$1=cb;return cf;}};A.head=function(ca){return ca.$==1?ca.$0:A.listEmpty();};A.tail=function(ca){return ca.$==1?ca.$1:A.listEmpty();};A.listEmpty=function(){return e.FailWith("The input list was empty.");};A.ofSeq=function(ca){var cb,cc,cd,ce,cf,cg;if(ca instanceof B)return ca;else if(ca instanceof a.Array)return A.ofArray(ca);else{cb=_9.Get(ca);try{cd=cb.MoveNext();if(!cd)cc=B.Empty;else{cf=new B({$:1});ce=cf;while(cd){ce.$0=cb.Current();if(cb.MoveNext())ce=(cg=new B({$:1}),ce.$1=cg,cg);else cd=false;}ce.$1=B.Empty;cc=cf;}return cc;}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}}};A.iter=function(ca,cb){var cc;cc=cb;while(cc.$==1){ca(A.head(cc));cc=A.tail(cc);}};Y.ofList=function(ca){var cb,cc;cc=[];cb=ca;while(!(cb.$==0)){cc.push(A.head(cb));cb=A.tail(cb);}return cc;};Y.map2=function(ca,cb,cc){var cd,ce,cf;Y.checkLength(cb,cc);cd=new a.Array(cc.length);for(ce=0,cf=cc.length-1;ce<=cf;ce++)cd[ce]=ca(cb[ce],cc[ce]);return cd;};Y.forall=function(ca,cb){var cc,cd,ce,cf;cc=true;cd=0;cf=Y.length(cb);while(cc&&cd<cf)if(ca(cb[cd]))cd=cd+1;else cc=false;return cc;};Y.ofSeq=function(ca){var cb,cc;if(ca instanceof a.Array)return ca.slice();else if(ca instanceof B)return Y.ofList(ca);else{cb=[];cc=_9.Get(ca);try{while(cc.MoveNext())cb.push(cc.Current());return cb;}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}}};Y.init=function(ca,cb){var cc,cd,ce;if(ca<0)e.FailWith("Negative size given.");else null;cc=new a.Array(ca);for(cd=0,ce=ca-1;cd<=ce;cd++)cc[cd]=cb(cd);return cc;};Y.exists=function(ca,cb){var cc,cd,ce,cf;cc=false;cd=0;cf=Y.length(cb);while(!cc&&cd<cf)if(ca(cb[cd]))cc=true;else cd=cd+1;return cc;};Y.tryPick=function(ca,cb){var cc,cd,ce;cc=null;cd=0;while(cd<cb.length&&cc==null){ce=ca(cb[cd]);if(ce!=null&&ce.$==1)cc=ce;cd=cd+1;}return cc;};Y.tryFindIndex=function(ca,cb){var cc,cd;cc=null;cd=0;while(cd<cb.length&&cc==null){ca(cb[cd])?cc={$:1,$0:cd}:void 0;cd=cd+1;}return cc;};Y.checkLength=function(ca,cb){if(ca.length!==cb.length)e.FailWith("The arrays have different lengths.");};Y.filter=function(ca,cb){var cc,cd,ce;cc=[];for(cd=0,ce=cb.length-1;cd<=ce;cd++)if(ca(cb[cd]))cc.push(cb[cd]);return cc;};Y.map=function(ca,cb){var cc,cd,ce;cc=new a.Array(cb.length);for(cd=0,ce=cb.length-1;cd<=ce;cd++)cc[cd]=ca(cb[cd]);return cc;};Y.iter=function(ca,cb){var cc,cd;for(cc=0,cd=cb.length-1;cc<=cd;cc++)ca(cb[cc]);};Y.foldBack=function(ca,cb,cc){var cd,ce,cf,cg,ch;cd=cc;cf=cb.length;for(cg=1,ch=cf;cg<=ch;cg++)cd=ca(cb[cf-cg],cd);return cd;};Y.choose=function(ca,cb){var cc,cd,ce,cf;cc=[];for(cd=0,ce=cb.length-1;cd<=ce;cd++){cf=ca(cb[cd]);if(cf==null);else cc.push(cf.$0);}return cc;};Y.pick=function(ca,cb){var cc;cc=Y.tryPick(ca,cb);return cc==null?e.FailWith("KeyNotFoundException"):cc.$0;};Y.concat=function(ca){return a.Array.prototype.concat.apply([],Y.ofSeq(ca));};Y.sortInPlace=function(ca){Y.mapInPlace(function(cb){return cb[0];},Y.mapiInPlace(function(cb,cc){return[cc,cb];},ca).sort(K.Compare));};Y.create=function(ca,cb){var cc,cd,ce;cc=new a.Array(ca);for(cd=0,ce=ca-1;cd<=ce;cd++)cc[cd]=cb;return cc;};_3.ofObj=function(ca){return ca==null?null:{$:1,$0:ca};};_4.$cctor=function(){var ca;_4.$cctor=a.ignore;_4.lastId=[0];_4.Int=(ca=[0],function(){ca[0]++;return ca[0];});};_6.Int=function(){_6.set_counter(_6.counter()+1);return _6.counter();};_6.set_counter=function(ca){bB.$cctor();bB.counter=ca;};_6.counter=function(){bB.$cctor();return bB.counter;};_7=g.DocElemNode=b8.Class({Equals:function(ca){return this.ElKey===ca.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_7);_7.New=function(ca,cb,cc,cd,ce,cf){var cg;return new _7((cg={Attr:ca,Children:cb,El:cd,ElKey:ce},(b8.SetOptional(cg,"Delimiters",cc),b8.SetOptional(cg,"Render",cf),cg)));};_9.Get=function(ca){return ca instanceof a.Array?_9.ArrayEnumerator(ca):K.Equals(typeof ca,"string")?_9.StringEnumerator(ca):ca.GetEnumerator();};_9.ArrayEnumerator=function(ca){return new _.New(0,null,function(cb){var cc;cc=cb.s;return cc<Y.length(ca)&&(cb.c=Y.get(ca,cc),cb.s=cc+1,true);},void 0);};_9.StringEnumerator=function(ca){return new _.New(0,null,function(cb){var cc;cc=cb.s;return cc<ca.length&&(cb.c=ca[cc],cb.s=cc+1,true);},void 0);};_9.Get0=function(ca){return ca instanceof a.Array?_9.ArrayEnumerator(ca):K.Equals(typeof ca,"string")?_9.StringEnumerator(ca):"GetEnumerator0"in ca?ca.GetEnumerator0():ca.GetEnumerator();};_=_9.T=b8.Class({MoveNext:function(){var ca;ca=this.n(this);this.e=ca?1:2;return ca;},Current:function(){return this.e===1?this.c:this.e===0?e.FailWith("Enumeration has not started. Call MoveNext."):e.FailWith("Enumeration already finished.");},Dispose:function(){if(this.d)this.d(this);}},f,_);_.New=b8.Ctor(function(ca,cb,cc,cd){f.New.call(this);this.s=ca;this.c=cb;this.n=cc;this.d=cd;this.e=0;},_);$.IntApplyUnchecked=function(){br.$cctor();return br.IntApplyUnchecked;};$.StringApply=function(){br.$cctor();return br.StringApply;};$.ApplyValue=function(ca,cb,cc){var cd;function ce(cf,cg){return cg==null?null:cf(cg.$0);}cd=null;return[function(cf){function cg(){cc.UpdateMaybe(function(ch){var ci;cd=ca(cf);return cd!=null&&cd.$==1&&(!K.Equals(cd.$0,ch)&&(ci=[cd,cd.$0],true))?ci[0]:null;});}cf.addEventListener("change",cg);cf.addEventListener("input",cg);cf.addEventListener("keypress",cg);},function(cf){var cg;cg=cb(cf);return function(ch){return ce(cg,ch);};},q.Map(function(cf){var cg;return cd!=null&&cd.$==1&&(K.Equals(cd.$0,cf)&&(cg=cd.$0,true))?null:{$:1,$0:cf};},cc.get_View())];};$.StringSet=function(){br.$cctor();return br.StringSet;};$.StringGet=function(){br.$cctor();return br.StringGet;};$.DateTimeSetUnchecked=function(){br.$cctor();return br.DateTimeSetUnchecked;};$.DateTimeGetUnchecked=function(){br.$cctor();return br.DateTimeGetUnchecked;};$.FileApplyValue=function(ca,cb,cc){var cd;function ce(cf,cg){return cg==null?null:cf(cg.$0);}cd=null;return[function(cf){cf.addEventListener("change",function(){cc.UpdateMaybe(function(cg){var ch;cd=ca(cf);return cd!=null&&cd.$==1&&(cd.$0!==cg&&(ch=[cd,cd.$0],true))?ch[0]:null;});});},function(cf){var cg;cg=cb(cf);return function(ch){return ce(cg,ch);};},q.Map(function(cf){var cg;return cd!=null&&cd.$==1&&(K.Equals(cd.$0,cf)&&(cg=cd.$0,true))?null:{$:1,$0:cf};},cc.get_View())];};$.FileSetUnchecked=function(){br.$cctor();return br.FileSetUnchecked;};$.FileGetUnchecked=function(){br.$cctor();return br.FileGetUnchecked;};$.IntSetUnchecked=function(){br.$cctor();return br.IntSetUnchecked;};$.IntGetUnchecked=function(){br.$cctor();return br.IntGetUnchecked;};$.IntSetChecked=function(){br.$cctor();return br.IntSetChecked;};$.IntGetChecked=function(){br.$cctor();return br.IntGetChecked;};$.FloatSetUnchecked=function(){br.$cctor();return br.FloatSetUnchecked;};$.FloatGetUnchecked=function(){br.$cctor();return br.FloatGetUnchecked;};$.FloatSetChecked=function(){br.$cctor();return br.FloatSetChecked;};$.FloatGetChecked=function(){br.$cctor();return br.FloatGetChecked;};ba.notPresent=function(){throw new bT.New();};bd.convertTextNode=function(ca){var cb,cc,cd,ce,cf,cg;cb=null;cc=0;ce=ca.textContent;cf=new a.RegExp(t.TextHoleRE(),"g");while(cb=cf.exec(ce),cb!==null){ca.parentNode.insertBefore(self.document.createTextNode(be.string(ce,{$:1,$0:cc},{$:1,$0:cf.lastIndex-Y.get(cb,0).length-1})),ca);cc=cf.lastIndex;cg=self.document.createElement("span");cg.setAttribute("ws-replace",Y.get(cb,1).toLowerCase());ca.parentNode.insertBefore(cg,ca);}cf.lastIndex=0;ca.textContent=be.string(ce,{$:1,$0:cc},null);};bd.failNotLoaded=function(ca){b9.warn("Instantiating non-loaded template",ca);};bd.fillTextHole=function(ca,cb,cc){var cd;cd=ca.querySelector("[ws-replace]");return K.Equals(cd,null)?(b9.warn("Filling non-existent text hole",cc),null):(cd.parentNode.replaceChild(self.document.createTextNode(cb),cd),{$:1,$0:cd.getAttribute("ws-replace")});};bd.removeHolesExcept=function(ca,cb){function cc(cd){t.foreachNotPreserved(ca,"["+cd+"]",function(ce){if(!cb.Contains(ce.getAttribute(cd)))ce.removeAttribute(cd);});}cc("ws-attr");cc("ws-onafterrender");cc("ws-var");t.foreachNotPreserved(ca,"[ws-hole]",function(cd){if(!cb.Contains(cd.getAttribute("ws-hole"))){cd.removeAttribute("ws-hole");while(cd.hasChildNodes())cd.removeChild(cd.lastChild);}});t.foreachNotPreserved(ca,"[ws-replace]",function(cd){if(!cb.Contains(cd.getAttribute("ws-replace")))cd.parentNode.removeChild(cd);});t.foreachNotPreserved(ca,"[ws-on]",function(cd){cd.setAttribute("ws-on",F.concat(" ",Y.filter(function(ce){return cb.Contains(Y.get(F.SplitChars(ce,[":"],1),1));},F.SplitChars(cd.getAttribute("ws-on"),[" "],1))));});t.foreachNotPreserved(ca,"[ws-attr-holes]",function(cd){var ce,cf,cg,ch,ci;ce=F.SplitChars(cd.getAttribute("ws-attr-holes"),[" "],1);for(cf=0,cg=ce.length-1;cf<=cg;cf++){ch=Y.get(ce,cf);cd.setAttribute(ch,(ci=new a.RegExp(t.TextHoleRE(),"g"),cd.getAttribute(ch).replace(ci,function(cj,ck){return cb.Contains(ck)?cj:"";})));}});};bd.fillInstanceAttrs=function(ca,cb){var cc,cd,ce,cf,cg;bd.convertAttrs(cb);cc=cb.nodeName.toLowerCase();cd=ca.querySelector("[ws-attr="+cc+"]");if(K.Equals(cd,null))b9.warn("Filling non-existent attr hole",cc);else{cd.removeAttribute("ws-attr");for(ce=0,cf=cb.attributes.length-1;ce<=cf;ce++){cg=cb.attributes.item(ce);if(cg.name=="class"&&cd.hasAttribute("class"))cd.setAttribute("class",cd.getAttribute("class")+" "+cg.nodeValue);else cd.setAttribute(cg.name,cg.nodeValue);}}};bd.mapHoles=function(ca,cb){function cc(cd){t.foreachNotPreserved(ca,"["+cd+"]",function(ce){var cf,cg;cf=(cg=null,[cb.TryGetValue(ce.getAttribute(cd).toLowerCase(),{get:function(){return cg;},set:function(ch){cg=ch;}}),cg]);if(cf[0])ce.setAttribute(cd,cf[1]);});}cc("ws-hole");cc("ws-replace");cc("ws-attr");cc("ws-onafterrender");cc("ws-var");t.foreachNotPreserved(ca,"[ws-on]",function(cd){cd.setAttribute("ws-on",F.concat(" ",Y.map(function(ce){var cf,cg,ch;cf=F.SplitChars(ce,[":"],1);cg=(ch=null,[cb.TryGetValue(Y.get(cf,1),{get:function(){return ch;},set:function(ci){ch=ci;}}),ch]);return cg[0]?Y.get(cf,0)+":"+cg[1]:ce;},F.SplitChars(cd.getAttribute("ws-on"),[" "],1))));});t.foreachNotPreserved(ca,"[ws-attr-holes]",function(cd){var ce,cf,cg;ce=F.SplitChars(cd.getAttribute("ws-attr-holes"),[" "],1);for(cf=0,cg=ce.length-1;cf<=cg;cf++)(function(){var ch;function ci(cj,ck){var cl;cl=e.KeyValue(ck);return cj.replace(new a.RegExp("\\${"+cl[0]+"}","ig"),"${"+cl[1]+"}");}ch=Y.get(ce,cf);return cd.setAttribute(ch,(((b8.Curried3(T.fold))(ci))(cd.getAttribute(ch)))(cb));}());});};bd.fill=function(ca,cb,cc){while(true)if(ca.hasChildNodes())cc=cb.insertBefore(ca.lastChild,cc);else return null;};bd.convertAttrs=function(ca){var cc,cd,ce,cf,cg,ch,ci,cj;function cb(ck){var cl;cl=ca.getAttribute(ck);if(cl==null);else ca.setAttribute(ck,cl.toLowerCase());}cc=ca.attributes;cd=[];ce=[];cf=[];for(cg=0,ch=cc.length-1;cg<=ch;cg++){ci=cc.item(cg);if(F.StartsWith(ci.nodeName,"ws-on")&&ci.nodeName!="ws-onafterrender"&&ci.nodeName!="ws-on"){cd.push(ci.nodeName);ce.push(be.string(ci.nodeName,{$:1,$0:"ws-on".length},null)+":"+ci.nodeValue.toLowerCase());}else!F.StartsWith(ci.nodeName,"ws-")&&(new a.RegExp(t.TextHoleRE())).test(ci.nodeValue)?(ci.nodeValue=(cj=new a.RegExp(t.TextHoleRE(),"g"),ci.nodeValue.replace(cj,function(ck,cl){return"${"+cl.toLowerCase()+"}";})),cf.push(ci.nodeName)):void 0;}if(!(ce.length==0))ca.setAttribute("ws-on",F.concat(" ",ce));if(!(cf.length==0))ca.setAttribute("ws-attr-holes",F.concat(" ",cf));cb("ws-hole");cb("ws-replace");cb("ws-attr");cb("ws-onafterrender");cb("ws-var");Y.iter(function(ck){ca.removeAttribute(ck);},cd);};be.string=function(ca,cb,cc){var cd,ce;return cb==null?cc!=null&&cc.$==1?(cd=cc.$0,cd<0?"":ca.slice(0,cd+1)):"":cc==null?ca.slice(cb.$0):(ce=cc.$0,ce<0?"":ca.slice(cb.$0,ce+1));};T.insufficient=function(){return e.FailWith("The input sequence has an insufficient number of elements.");};Y.mapiInPlace=function(ca,cb){var cc,cd;for(cc=0,cd=cb.length-1;cc<=cd;cc++)cb[cc]=ca(cc,cb[cc]);return cb;};Y.mapInPlace=function(ca,cb){var cc,cd;for(cc=0,cd=cb.length-1;cc<=cd;cc++)cb[cc]=ca(cb[cc]);};T.nonNegative=function(){return e.FailWith("The input must be non-negative.");};bf=I.KeyCollection=b8.Class({GetEnumerator:function(){return _9.Get(T.map(function(ca){return ca.K;},this.d));}},f,bf);bf.New=b8.Ctor(function(ca){f.New.call(this);this.d=ca;},bf);bg.get_UseAnimations=function(){return bv.UseAnimations();};bg.Play=function(ca){var cb;cb=null;return bm.Delay(function(){return bm.Bind(bg.Run(a.ignore,bv.Actions(ca)),function(){bv.Finalize(ca);return bm.Return(null);});});};bg.Append=function(ca,cb){return{$:0,$0:bI.Append(ca.$0,cb.$0)};};bg.Run=function(ca,cb){var cc;function cd(ce){function cf(cg){return function(ch){var ci;ci=ch-cg;cb.Compute(ci);ca();return ci<=cc?void a.requestAnimationFrame(function(cj){(cf(cg))(cj);}):ce();};}a.requestAnimationFrame(function(cg){(cf(cg))(cg);});}cc=cb.Duration;return cc===0?bm.Zero():bm.FromContinuations(function(ce,cf,cg){return cd.apply(null,[ce,cf,cg]);});};bg.Concat=function(ca){return{$:0,$0:bI.Concat(T.map(bv.List,ca))};};bg.get_Empty=function(){return{$:0,$0:bI.Empty()};};bh.BatchUpdatesEnabled=function(){bw.$cctor();return bw.BatchUpdatesEnabled;};bi.StartProcessor=function(ca){var cb;function cc(){var cd;cd=null;return bm.Delay(function(){return bm.Bind(ca,function(){var ce;ce=cb[0];return K.Equals(ce,1)?(cb[0]=0,bm.Zero()):K.Equals(ce,2)?(cb[0]=1,cc()):bm.Zero();});});}cb=[0];return function(){var cd;cd=cb[0];if(K.Equals(cd,0)){cb[0]=1;bm.Start(cc(),null);}else K.Equals(cd,1)?cb[0]=2:void 0;};};bj=I.FSharpMap=b8.Class({Equals:function(ca){return this.Count()===ca.Count()&&T.forall2(K.Equals,this,ca);},Count:function(){var ca;ca=this.tree;return ca==null?0:ca.Count;},GetEnumerator:function(){return _9.Get(T.map(function(ca){return{K:ca.Key,V:ca.Value};},bx.Enumerate(false,this.tree)));},GetHashCode:function(){return K.Hash(Y.ofSeq(this));},Add$1:function(ca,cb){return new bj.New$1(bx.Add(bz.New(ca,cb),this.tree));},get_IsEmpty:function(){return this.tree==null;},get_Tree:function(){return this.tree;},CompareTo0:function(ca){return T.compareWith(K.Compare,this,ca);}},f,bj);bj.New=b8.Ctor(function(ca){bj.New$1.call(this,bN.fromSeq(ca));},bj);bj.New$1=b8.Ctor(function(ca){f.New.call(this);this.tree=ca;},bj);bk.OfArray=function(ca){return new bj.New$1(bx.OfSeq(T.map(function(cb){return bz.New(cb[0],cb[1]);},ca)));};bk.FoldBack=function(ca,cb,cc){return T.fold(function(cd,ce){return ca(ce.Key,ce.Value,cd);},cc,bx.Enumerate(true,cb.get_Tree()));};bk.ToSeq=function(ca){return T.map(function(cb){return[cb.Key,cb.Value];},bx.Enumerate(false,ca.get_Tree()));};bl.toSafe=function(ca){return ca==null?"":ca;};bm.Delay=function(ca){return function(cb){try{(ca(null))(cb);}catch(cc){cb.k({$:1,$0:cc});}};};bm.Bind=function(ca,cb){return bm.checkCancel(function(cc){ca(bV.New(function(cd){var ce;if(cd.$==0){ce=cd.$0;bm.scheduler().Fork(function(){try{(cb(ce))(cc);}catch(cf){cc.k({$:1,$0:cf});}});}else bm.scheduler().Fork(function(){cc.k(cd);});},cc.ct));});};bm.Zero=function(){bW.$cctor();return bW.Zero;};bm.Start=function(ca,cb){var cc,cd;cc=(cd=(bm.defCTS())[0],cb==null?cd:cb.$0);bm.scheduler().Fork(function(){if(!cc.c)ca(bV.New(function(ce){if(ce.$==1)bm.UncaughtAsyncError(ce.$0);},cc));});};bm.Return=function(ca){return function(cb){cb.k({$:0,$0:ca});};};bm.scheduler=function(){bW.$cctor();return bW.scheduler;};bm.checkCancel=function(ca){return function(cb){if(cb.ct.c)bm.cancel(cb);else ca(cb);};};bm.defCTS=function(){bW.$cctor();return bW.defCTS;};bm.UncaughtAsyncError=function(ca){b9.log("WebSharper: Uncaught asynchronous exception",ca);};bm.FromContinuations=function(ca){return function(cb){var cc;function cd(ce){if(cc[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cc[0]=true;bm.scheduler().Fork(ce);}}cc=[false];ca(function(ce){cd(function(){cb.k({$:0,$0:ce});});},function(ce){cd(function(){cb.k({$:1,$0:ce});});},function(ce){cd(function(){cb.k({$:2,$0:ce});});});};};bm.cancel=function(ca){ca.k({$:2,$0:new b2.New(ca.ct)});};bo.New=function(ca,cb,cc,cd){var ce;ce={DynElem:ca,DynFlags:cb,DynNodes:cc};b8.SetOptional(ce,"OnAfterRender",cd);return ce;};bp=g.Elt=b8.Class({},p,bp);bp.New=function(ca,cb,cc){var cd,ce;cd=S.CreateElemNode(ca,cb,cc.docNode);ce=bD.Create(cc.updates);return new bp.New$1({$:1,$0:cd},q.Map2Unit(V.Updates(cd.Attr),ce.v),ca,ce);};bp.New$1=b8.Ctor(function(ca,cb,cc,cd){p.New.call(this,ca,cb);this.docNode$1=ca;this.updates$1=cb;this.elt=cc;this.rvUpdates=cd;},bp);bq.ofSeqNonCopying=function(ca){var cb,cc;if(ca instanceof a.Array)return ca;else if(ca instanceof B)return Y.ofList(ca);else if(ca===null)return[];else{cb=[];cc=_9.Get(ca);try{while(cc.MoveNext())cb.push(cc.Current());return cb;}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}}};bq.TreeReduce=function(ca,cb,cc){var cd;function ce(cf){return function(cg){var ch,ci;switch(cg<=0?0:cg===1?cf>=0&&cf<cd?1:(ch=cg,2):(ch=cg,2)){case 0:return ca;case 1:return Y.get(cc,cf);case 2:ci=cg/2>>0;return cb((ce(cf))(ci),(ce(cf+ci))(cg-ci));}};}cd=Y.length(cc);return(ce(0))(cd);};bq.MapTreeReduce=function(ca,cb,cc,cd){var ce;function cf(cg){return function(ch){var ci,cj;switch(ch<=0?0:ch===1?cg>=0&&cg<ce?1:(ci=ch,2):(ci=ch,2)){case 0:return cb;case 1:return ca(Y.get(cd,cg));case 2:cj=ch/2>>0;return cc((cf(cg))(cj),(cf(cg+cj))(ch-cj));}};}ce=Y.length(cd);return(cf(0))(ce);};br.$cctor=function(){var ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn;br.$cctor=a.ignore;br.EmptyAttr=null;br.BoolCheckedApply=function(co){function cp(cq,cr){return cr!=null&&cr.$==1?void(cq.checked=cr.$0):null;}return[function(cq){cq.addEventListener("change",function(){return co.Get()!=cq.checked?co.Set(cq.checked):null;});},function(cq){return function(cr){return cp(cq,cr);};},q.Map(function(cq){return{$:1,$0:cq};},co.get_View())];};br.StringSet=function(co){return function(cp){co.value=cp;};};br.StringGet=function(co){return{$:1,$0:co.value};};br.StringApply=(ca=$.StringGet(),(cb=$.StringSet(),function(co){return $.ApplyValue(ca,cb,co);}));br.DateTimeSetUnchecked=function(co){return function(cp){co.value=(new a.Date(cp)).toLocaleString();};};br.DateTimeGetUnchecked=function(co){var cp,cq,cr,cs;cp=co.value;return bE.isBlank(cp)?{$:1,$0:-8640000000000000}:(cq=(cr=0,[(cs=bQ.TryParse(cp),cs!=null&&cs.$==1&&(cr=cs.$0,true)),cr]),cq[0]?{$:1,$0:cq[1]}:null);};br.DateTimeApplyUnchecked=(cc=$.DateTimeGetUnchecked(),(cd=$.DateTimeSetUnchecked(),function(co){return $.ApplyValue(cc,cd,co);}));br.FileSetUnchecked=function(){return function(){return null;};};br.FileGetUnchecked=function(co){var cp;cp=co.files;return{$:1,$0:Y.ofSeq(T.delay(function(){return T.map(function(cq){return cp.item(cq);},e.range(0,cp.length-1));}))};};br.FileApplyUnchecked=(ce=$.FileGetUnchecked(),(cf=$.FileSetUnchecked(),function(co){return $.FileApplyValue(ce,cf,co);}));br.IntSetUnchecked=function(co){return function(cp){co.value=a.String(cp);};};br.IntGetUnchecked=function(co){var cp,cq;cp=co.value;return bE.isBlank(cp)?{$:1,$0:0}:(cq=+cp,cq!==cq>>0?null:{$:1,$0:cq});};br.IntApplyUnchecked=(cg=$.IntGetUnchecked(),(ch=$.IntSetUnchecked(),function(co){return $.ApplyValue(cg,ch,co);}));br.IntSetChecked=function(co){return function(cp){var cq;cq=cp.get_Input();return co.value!=cq?void(co.value=cq):null;};};br.IntGetChecked=function(co){var cp,cq,cr;cp=co.value;return{$:1,$0:bE.isBlank(cp)?(co.checkValidity?co.checkValidity():true)?new bF({$:2,$0:cp}):new bF({$:1,$0:cp}):(cq=(cr=0,[E.TryParseInt32(cp,{get:function(){return cr;},set:function(cs){cr=cs;}}),cr]),cq[0]?new bF({$:0,$0:cq[1],$1:cp}):new bF({$:1,$0:cp}))};};br.IntApplyChecked=(ci=$.IntGetChecked(),(cj=$.IntSetChecked(),function(co){return $.ApplyValue(ci,cj,co);}));br.FloatSetUnchecked=function(co){return function(cp){co.value=a.String(cp);};};br.FloatGetUnchecked=function(co){var cp,cq;cp=co.value;return bE.isBlank(cp)?{$:1,$0:0}:(cq=+cp,a.isNaN(cq)?null:{$:1,$0:cq});};br.FloatApplyUnchecked=(ck=$.FloatGetUnchecked(),(cl=$.FloatSetUnchecked(),function(co){return $.ApplyValue(ck,cl,co);}));br.FloatSetChecked=function(co){return function(cp){var cq;cq=cp.get_Input();return co.value!=cq?void(co.value=cq):null;};};br.FloatGetChecked=function(co){var cp,cq;cp=co.value;return{$:1,$0:bE.isBlank(cp)?(co.checkValidity?co.checkValidity():true)?new bF({$:2,$0:cp}):new bF({$:1,$0:cp}):(cq=+cp,a.isNaN(cq)?new bF({$:1,$0:cp}):new bF({$:0,$0:cq,$1:cp}))};};br.FloatApplyChecked=(cm=$.FloatGetChecked(),(cn=$.FloatSetChecked(),function(co){return $.ApplyValue(cm,cn,co);}));};bt.New=function(ca,cb){return{PreviousNodes:ca,Top:cb};};bu.get_Empty=function(){return{$:0,$0:new Z.New$3()};};bu.FindAll=function(ca){var cb;function cc(cf,cg){var ch,ci,cj,ck,cl;while(true)switch(cf){case 0:if(cg!=null&&cg.$==0){ci=cg.$1;cj=cg.$0;cc(0,cj);cg=ci;}else if(cg!=null&&cg.$==1){ck=cg.$0;cg=ck;cf=1;}else if(cg!=null&&cg.$==2){cl=cg.$0;cg=cl.Current;}else return cg!=null&&cg.$==6?(ch=cg.$0.Holes,(function(cm){return function(cn){Y.iter(cm,cn);};}(ce))(ch)):null;break;case 1:cb.push(cg);cg=cg.Children;cf=0;break;}}function cd(cf){return cc(0,cf);}function ce(cf){return cc(1,cf);}cb=[];cd(ca);return{$:0,$0:new Z.New$2(cb)};};bu.Filter=function(ca,cb){return{$:0,$0:bY.Filter(ca,cb.$0)};};bu.Except=function(ca,cb){return{$:0,$0:bY.Except(ca.$0,cb.$0)};};bu.ToArray=function(ca){return bY.ToArray(ca.$0);};bu.Intersect=function(ca,cb){return{$:0,$0:bY.Intersect(ca.$0,cb.$0)};};bv.UseAnimations=function(){bH.$cctor();return bH.UseAnimations;};bv.Actions=function(ca){return bv.ConcatActions(Y.choose(function(cb){return cb.$==1?{$:1,$0:cb.$0}:null;},bI.ToArray(ca.$0)));};bv.Finalize=function(ca){Y.iter(function(cb){if(cb.$==0)cb.$0();},bI.ToArray(ca.$0));};bv.ConcatActions=function(ca){var cb,cc,cd,ce;cb=bq.ofSeqNonCopying(ca);cc=Y.length(cb);return cc===0?bv.Const():cc===1?Y.get(cb,0):(cd=T.max(T.map(function(cf){return cf.Duration;},cb)),(ce=Y.map(function(cf){return bv.Prolong(cd,cf);},cb),bv.Def(cd,function(cf){Y.iter(function(cg){cg.Compute(cf);},ce);})));};bv.List=function(ca){return ca.$0;};bv.Const=function(ca){return bv.Def(0,function(){return ca;});};bv.Def=function(ca,cb){return{Compute:cb,Duration:ca};};bv.Prolong=function(ca,cb){var cc,cd,ce;cc=cb.Compute;cd=cb.Duration;ce=b3.Create(function(){return cb.Compute(cb.Duration);});return{Compute:function(cf){return cf>=cd?ce.f():cc(cf);},Duration:ca};};bw.$cctor=function(){bw.$cctor=a.ignore;bw.BatchUpdatesEnabled=true;};by.New=function(ca,cb,cc,cd,ce){return{Node:ca,Left:cb,Right:cc,Height:cd,Count:ce};};bz=I.Pair=b8.Class({Equals:function(ca){return K.Equals(this.Key,ca.Key);},GetHashCode:function(){return K.Hash(this.Key);},CompareTo0:function(ca){return K.Compare(this.Key,ca.Key);}},null,bz);bz.New=function(ca,cb){return new bz({Key:ca,Value:cb});};bA.$cctor=function(){bA.$cctor=a.ignore;function ca(cb){var cc,cd;cc=(cd=0,[E.TryParseInt32(cb,{get:function(){return cd;},set:function(ce){cd=ce;}}),cd]);return cc[0]?{$:1,$0:cc[1]}:null;}bA.Empty=_1.New$1(function(){return[];},function(){return null;});bA.rRoot=_1.New(function(cb){return[cb];},[]);bA.rString=_1.New$1(function(cb){var cc,cd;cc=cb.Segments;return cc.$==0?[[cb,""]]:(cd=bJ.read(cc.$0),cd!=null&&cd.$==1?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),cd.$0]]:[]);},function(cb){return{$:1,$0:[O.Segment$2(cb==null?"null":bJ.write(cb))]};});bA.rChar=_1.New$1(function(cb){var cc,cd,ce;cc=cb.Segments;return cc.$==1?(cd=bJ.read(cc.$0),cd!=null&&cd.$==1&&(cd.$0.length===1&&(ce=cd.$0,true))?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),bK.Parse(ce)]]:[]):[];},function(cb){return{$:1,$0:[O.Segment$2(cb)]};});bA.rGuid=_1.New$1(function(cb){var cc,cd;cc=cb.Segments;return cc.$==1?(cd=null,bM.TryParse(cc.$0,{get:function(){return cd;},set:function(ce){cd=ce;}})?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),cd]]:[]):[];},function(cb){return{$:1,$0:[O.Segment$2(a.String(cb))]};});bA.rInt=_1.New$1(function(cb){var cc,cd;cc=cb.Segments;return cc.$==1?(cd=0,E.TryParseInt32(cc.$0,{get:function(){return cd;},set:function(ce){cd=ce;}})?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),cd]]:[]):[];},function(cb){return{$:1,$0:[O.Segment$2(a.String(cb))]};});bA.rDouble=_1.New$1(function(cb){var cc,cd,ce;cc=cb.Segments;return cc.$==1?(cd=0,(ce=a.Number(cc.$0),a.isNaN(ce)?false:(cd=ce,true))?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),cd]]:[]):[];},function(cb){return{$:1,$0:[O.Segment$2(a.String(cb))]};});bA.rSByte=_1.New$1(function(cb){var cc,cd;cc=cb.Segments;return cc.$==1?(cd=0,E.TryParseSByte(cc.$0,{get:function(){return cd;},set:function(ce){cd=ce;}})?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),cd]]:[]):[];},function(cb){return{$:1,$0:[O.Segment$2(a.String(cb))]};});bA.rByte=_1.New$1(function(cb){var cc,cd;cc=cb.Segments;return cc.$==1?(cd=0,E.TryParseByte(cc.$0,{get:function(){return cd;},set:function(ce){cd=ce;}})?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),cd]]:[]):[];},function(cb){return{$:1,$0:[O.Segment$2(a.String(cb))]};});bA.rInt16=_1.New$1(function(cb){var cc,cd;cc=cb.Segments;return cc.$==1?(cd=0,E.TryParseInt16(cc.$0,{get:function(){return cd;},set:function(ce){cd=ce;}})?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),cd]]:[]):[];},function(cb){return{$:1,$0:[O.Segment$2(a.String(cb))]};});bA.rUInt16=_1.New$1(function(cb){var cc,cd;cc=cb.Segments;return cc.$==1?(cd=0,E.TryParseUInt16(cc.$0,{get:function(){return cd;},set:function(ce){cd=ce;}})?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),cd]]:[]):[];},function(cb){return{$:1,$0:[O.Segment$2(a.String(cb))]};});bA.rUInt=_1.New$1(function(cb){var cc,cd;cc=cb.Segments;return cc.$==1?(cd=0,E.TryParseUInt32(cc.$0,{get:function(){return cd;},set:function(ce){cd=ce;}})?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),cd]]:[]):[];},function(cb){return{$:1,$0:[O.Segment$2(a.String(cb))]};});bA.rInt64=_1.New$1(function(cb){var cc,cd;cc=cb.Segments;return cc.$==1?(cd=0,E.TryParseInt64(cc.$0,{get:function(){return cd;},set:function(ce){cd=ce;}})?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),cd]]:[]):[];},function(cb){return{$:1,$0:[O.Segment$2(a.String(cb))]};});bA.rUInt64=_1.New$1(function(cb){var cc,cd;cc=cb.Segments;return cc.$==1?(cd=0,E.TryParseUInt64(cc.$0,{get:function(){return cd;},set:function(ce){cd=ce;}})?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),cd]]:[]):[];},function(cb){return{$:1,$0:[O.Segment$2(a.String(cb))]};});bA.rSingle=_1.New$1(function(cb){var cc,cd,ce;cc=cb.Segments;return cc.$==1?(cd=0,(ce=a.Number(cc.$0),a.isNaN(ce)?false:(cd=ce,true))?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),cd]]:[]):[];},function(cb){return{$:1,$0:[O.Segment$2(a.String(cb))]};});bA.rBool=_1.New$1(function(cb){var cc,cd,ce;cc=cb.Segments;return cc.$==1?(cd=(ce=null,[E.TryParseBool(cc.$0,{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]),cd[0]?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),cd[1]]]:[]):[];},function(cb){return{$:1,$0:[O.Segment$2(cb?"True":"False")]};});bA.rWildcard=_1.New$1(function(cb){return[[O.New(B.Empty,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),F.concat("/",cb.Segments)]];},function(cb){return{$:1,$0:[O.Segment$2(cb)]};});bA.rDateTime=_1.New$1(function(cb){var cc,cd,ce,cf,cg,ch,ci,cj,ck;cc=cb.Segments;return cc.$==1?(cd=cc.$0,cd.length===19&&cd[4]==="-"&&cd[7]==="-"&&cd[10]==="-"&&cd[13]==="."&&cd[16]==="."?(ce=ca(be.string(cd,{$:1,$0:0},{$:1,$0:3})),(cf=ca(be.string(cd,{$:1,$0:5},{$:1,$0:6})),(cg=ca(be.string(cd,{$:1,$0:8},{$:1,$0:9})),(ch=ca(be.string(cd,{$:1,$0:11},{$:1,$0:12})),(ci=ca(be.string(cd,{$:1,$0:14},{$:1,$0:15})),(cj=ca(be.string(cd,{$:1,$0:17},{$:1,$0:18})),ce!=null&&ce.$==1&&(cf!=null&&cf.$==1&&(cg!=null&&cg.$==1&&(ch!=null&&ch.$==1&&(ci!=null&&ci.$==1&&(cj!=null&&cj.$==1&&(ck=[cg.$0,ch.$0,cf.$0,ci.$0,cj.$0,ce.$0],true))))))?[[O.New(cc.$1,cb.QueryArgs,cb.FormData,cb.Method,cb.Body),(new a.Date(ck[5],ck[2]-1,ck[0],ck[1],ck[3],ck[4])).getTime()]]:[])))))):[]):[];},function(cb){var cc,cd;function ce(cf){var cg;cg=a.String(cf);return cg.length===1?"0"+cg:cg;}return{$:1,$0:[O.Segment$2((cc=a.String((new a.Date(cb)).getFullYear()),(cd=cc.length,cd===1?"000"+cc:cd===2?"00"+cc:cd===3?"0"+cc:cc))+"-"+ce((new a.Date(cb)).getMonth()+1)+"-"+ce((new a.Date(cb)).getDate())+"-"+ce((new a.Date(cb)).getHours())+"."+ce((new a.Date(cb)).getMinutes())+"."+ce((new a.Date(cb)).getSeconds()))]};});};bB.$cctor=function(){bB.$cctor=a.ignore;bB.counter=0;};bC.Clear=function(ca){ca.splice(0,Y.length(ca));};bD=g.Updates=b8.Class({},null,bD);bD.Create=function(ca){var cb;cb=null;cb=bD.New(ca,null,function(){var cc;cc=cb.s;return cc===null?(cc=C.Copy(cb.c()),cb.s=cc,C.WhenObsoleteRun(cc,function(){cb.s=null;}),cc):cc;});return cb;};bD.New=function(ca,cb,cc){return new bD({c:ca,s:cb,v:cc});};bE.isBlank=function(ca){return F.forall(bK.IsWhiteSpace,ca);};bF=g.CheckedInput=b8.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,bF);bG.$cctor=function(){var ca;bG.$cctor=a.ignore;bG.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bG.rtagName=new a.RegExp("<([\\w:]+)");bG.rhtml=new a.RegExp("<|&#?\\w+;");bG.wrapMap=(ca=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:ca,tbody:ca,tfoot:ca,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bG.defaultWrap=[0,"",""];};bH.$cctor=function(){bH.$cctor=a.ignore;bH.CubicInOut=bU.Custom(function(ca){var cb;cb=ca*ca;return 3*cb-2*(cb*ca);});bH.UseAnimations=true;};bI.Append=function(ca,cb){return ca.$==0?cb:cb.$==0?ca:{$:2,$0:ca,$1:cb};};bI.ToArray=function(ca){var cb;function cc(cd){var ce,cf;while(true)if(cd.$==1)return cb.push(cd.$0);else if(cd.$==2){ce=cd.$1;cf=cd.$0;cc(cf);cd=ce;}else return cd.$==3?Y.iter(function(cg){cb.push(cg);},cd.$0):null;}cb=[];cc(ca);return cb.slice(0);};bI.Concat=function(ca){var cb;cb=bq.ofSeqNonCopying(ca);return bq.TreeReduce(bI.Empty(),bI.Append,cb);};bI.Empty=function(){b4.$cctor();return b4.Empty;};_1.New=function(ca,cb){return{Parse:ca,Segment:cb};};bJ.read=function(ca){var cb;function cc(cd){var ce;while(true){ce=bJ.readEscapedFromChars(cd);if(ce[0]===-2)return null;else if(ce[0]===-1)return{$:1,$0:(function(cf){return function(cg){return F.concat(cf,cg);};}(""))(cb)};else{cb.push(b_.fromCharCode(ce[0]));cd=ce[1];}}}cb=b8.MarkResizable([]);return cc(A.ofSeq(T.map(function(cd){return cd.charCodeAt();},ca)));};bJ.write=function(ca){return F.concat("",T.mapi(function(cb,cc){return bJ.writeEscapedAsString(cb+1===ca.length,cc);},ca));};bJ.readEscapedFromChars=function(ca){var cb,cc,cd,ce,cf,cg,ch,ci;function cj(){var cl,cm;return cb.$==1?(cl=cb.$1,(cm=cb.$0,(cb=cl,cm))):-1;}function ck(cl){return cl>="0".charCodeAt()&&cl<="9".charCodeAt()?cl-"0".charCodeAt():cl>="a".charCodeAt()&&cl<="f".charCodeAt()?cl-"a".charCodeAt()+10:cl>="A".charCodeAt()&&cl<="F".charCodeAt()?cl-"A".charCodeAt()+10:-2;}cb=ca;return[(cc=cj(),cc==="~".charCodeAt()?(cd=cj(),cd==="u".charCodeAt()?(ce=cj(),(cf=cj(),(cg=cj(),(ch=cj(),ce>=0&&cf>=0&&cg>=0&&ch>=0?bJ.op_PlusPlus(bJ.op_PlusPlus(bJ.op_PlusPlus(ck(ce),ck(cf)),ck(cg)),ck(ch)):-2)))):(ci=cj(),cd>=0&&ci>=0?bJ.op_PlusPlus(ck(cd),ck(ci)):-2)):cc),cb];};bJ.writeEscapedAsString=function(ca,cb){var cc;cc=cb.charCodeAt();return bJ.isUnreserved(ca,cb)?cb:cc<256?"~"+F.PadLeftWith(cc.toString(16),2,"0"):"~u"+F.PadLeftWith(cc.toString(16),4,"0");};bJ.op_PlusPlus=function(ca,cb){return(ca<<4)+cb;};bJ.isUnreserved=function(ca,cb){return cb==="-"||(cb==="."?!ca:cb==="_"||(cb>="A"&&cb<="Z"||(cb>="a"&&cb<="z"||cb>="0"&&cb<="9")));};bK.Parse=function(ca){return ca.length===1?ca:e.FailWith("String must be exactly one character long.");};bK.IsWhiteSpace=function(ca){return ca.match(new a.RegExp("\\s"))!==null;};bM.TryParse=function(ca,cb){try{cb.set(bM.Parse(ca));return true;}catch(cc){return false;}};bM.Parse=function(ca){var cb,cc,cd;try{return bM.ParseExact(ca,"D");}catch(ce){try{cb=bM.ParseExact(ca,"B");}catch(cf){try{cc=bM.ParseExact(ca,"P");}catch(cg){try{cd=bM.ParseExact(ca,"N");}catch(ch){cd=bM.ParseExact(ca,"X");}cc=cd;}cb=cc;}return cb;}};bM.ParseExact=function(ca,cb){var cc,cd,ce,cg,ch,ci,cj,ck,cl,cm,cn,co,cp;function cf(cq){var cr,cs,ct,cu;for(cr=0,cs=35;cr<=cs;cr++){if(cr===8||(cr===13||(cr===18||cr===23)))cq[cr]!=="-"?bM.ShapeError():void 0;else{cu=cq[cr];!("0"<=cu&&cu<="9"||"a"<=cu&&cu<="f")?bM.ShapeError():void 0;}}return cq;}cg=cb.toUpperCase();if(cg=="N"){ch=F.Trim(ca).toLowerCase();if(ch.length!==32)bM.ShapeError();for(ci=0,cj=31;ci<=cj;ci++){ck=ch[ci];if(!("0"<=ck&&ck<="9"||"a"<=ck&&ck<="f"))bM.ShapeError();}return F.Substring(ch,0,8)+"-"+F.Substring(ch,8,4)+"-"+F.Substring(ch,12,4)+"-"+F.Substring(ch,16,4)+"-"+ch.substring(20);}else if(cg=="D"){cc=F.Trim(ca).toLowerCase();cc.length!==36?bM.ShapeError():void 0;return cf(cc);}else if(cg=="B"){cd=F.Trim(ca).toLowerCase();cd.length!==38||cd[0]!=="{"||cd[17]!=="}"?bM.ShapeError():void 0;return cf(F.Substring(cd,1,36));}else if(cg=="P"){ce=F.Trim(ca).toLowerCase();ce.length!==38||ce[0]!=="("||ce[17]!==")"?bM.ShapeError():void 0;return cf(F.Substring(ce,1,36));}else if(cg=="X"){cl=F.Trim(ca).toLowerCase();if(cl.length!==68)bM.ShapeError();for(cm=0,cn=67;cm<=cn;cm++){switch(cm){case 26:case 0:if(cl[cm]!=="{")bM.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(cl[cm]!=="0")bM.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(cl[cm]!=="x")bM.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(cl[cm]!==",")bM.ShapeError();break;case 67:case 66:if(cl[cm]!=="{")bM.ShapeError();break;default:cp=cl[cm];if(!("0"<=cp&&cp<="9"||"a"<=cp&&cp<="f"))bM.ShapeError();break;}}return F.Substring(cl,3,8)+"-"+F.Substring(cl,14,4)+"-"+F.Substring(cl,21,4)+"-"+F.Substring(cl,29,2)+F.Substring(cl,34,2)+"-"+F.Substring(cl,39,2)+F.Substring(cl,44,2)+F.Substring(cl,49,2)+F.Substring(cl,54,2)+F.Substring(cl,59,2)+F.Substring(cl,64,2);}else return bM.FormatError();};bM.ShapeError=function(){throw new b7.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};bM.FormatError=function(){throw new b7.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};E.TryParseSByte=function(ca,cb){return E.TryParse(ca,-128,127,cb);};E.TryParseByte=function(ca,cb){return E.TryParse(ca,0,255,cb);};E.TryParseInt16=function(ca,cb){return E.TryParse(ca,-32768,32767,cb);};E.TryParseUInt16=function(ca,cb){return E.TryParse(ca,0,65535,cb);};E.TryParseUInt32=function(ca,cb){return E.TryParse(ca,0,4294967295,cb);};E.TryParseInt64=function(ca,cb){return E.TryParse(ca,-9223372036854775808,9223372036854775807,cb);};E.TryParseUInt64=function(ca,cb){return E.TryParse(ca,0,18446744073709551615,cb);};bN.fromSeq=function(ca){var cb;cb=Y.ofSeq(T.map(function(cc){return bz.New(cc[0],cc[1]);},T.distinctBy(function(cc){return cc[0];},T.rev(ca))));Y.sortInPlace(cb);return bx.Build(cb,0,cb.length-1);};bO=bm.Scheduler=b8.Class({Fork:function(ca){var cb;cb=this;this.robin.push(ca);if(this.idle){this.idle=false;a.setTimeout(function(){cb.tick();},0);}},tick:function(){var ca,cb,cc;cb=this;cc=b$.now();ca=true;while(ca)if(this.robin.length===0){this.idle=true;ca=false;}else{(this.robin.shift())();b$.now()-cc>40?(a.setTimeout(function(){cb.tick();},0),ca=false):void 0;}}},f,bO);bO.New=b8.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bO);bP.WriteLink=function(ca,cb){var cc;cc=cb.get_IsEmpty()?"":"?"+bP.WriteQuery(cb);return"/"+bP.Concat(ca)+cc;};bP.Concat=function(ca){var cb,cc;cb=[];cc=true;A.iter(function(cd){if(!F.IsNullOrEmpty(cd)){cc?cc=false:cb.push("/");cb.push(cd);}},ca);return F.Join("",Y.ofSeq(cb));};bP.WriteQuery=function(ca){function cb(cc,cd){return cc+"="+cd;}return F.concat("&",T.map(function(cc){return cb(cc[0],cc[1]);},bk.ToSeq(ca)));};bQ.TryParse=function(ca){var cb;cb=b$.parse(ca);return a.isNaN(cb)?null:{$:1,$0:cb};};E.TryParse=function(ca,cb,cc,cd){var ce,cf;ce=+ca;cf=ce===ce-ce%1&&ce>=cb&&ce<=cc;if(cf)cd.set(ce);return cf;};E.TryParseBool=function(ca,cb){var cc;cc=ca.toLowerCase();return cc=="true"?(cb.set(true),true):cc=="false"&&(cb.set(false),true);};bR=g.DynamicAttrNode=b8.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(ca){return bg.get_Empty();},NGetEnterAnim:function(ca){return bg.get_Empty();},NGetChangeAnim:function(ca){return bg.get_Empty();},NSync:function(ca){if(this.dirty){(this.push(ca))(this.value);this.dirty=false;}}},f,bR);bR.New=b8.Ctor(function(ca,cb){var cc;cc=this;f.New.call(this);this.push=cb;this.value=void 0;this.dirty=false;this.updates=q.Map(function(cd){cc.value=cd;cc.dirty=true;},ca);},bR);bT=d.KeyNotFoundException=b8.Class({},bS,bT);bT.New=b8.Ctor(function(){bT.New$1.call(this,"The given key was not present in the dictionary.");},bT);bT.New$1=b8.Ctor(function(ca){this.message=ca;bc.setPrototypeOf(this,bT.prototype);},bT);bU=g.Easing=b8.Class({},f,bU);bU.Custom=function(ca){return new bU.New(ca);};bU.New=b8.Ctor(function(ca){f.New.call(this);this.transformTime=ca;},bU);bV.New=function(ca,cb){return{k:ca,ct:cb};};bW.$cctor=function(){bW.$cctor=a.ignore;bW.noneCT=bX.New(false,[]);bW.scheduler=new bO.New();bW.defCTS=[new b0.New()];bW.Zero=bm.Return();bW.GetCT=function(ca){ca.k({$:0,$0:ca.ct});};};bX.New=function(ca,cb){return{c:ca,r:cb};};bY.Filter=function(ca,cb){return new Z.New$2(Y.filter(ca,bY.ToArray(cb)));};bY.Except=function(ca,cb){var cc;cc=new Z.New$2(bY.ToArray(cb));cc.ExceptWith(bY.ToArray(ca));return cc;};bY.ToArray=function(ca){var cb;cb=Y.create(ca.Count(),void 0);ca.CopyTo(cb,0);return cb;};bY.Intersect=function(ca,cb){var cc;cc=new Z.New$2(bY.ToArray(ca));cc.IntersectWith(bY.ToArray(cb));return cc;};bZ.concat=function(ca){var cb,cc;cb=[];for(var cd in ca)cb.push.apply(cb,ca[cd]);return cb;};bx.OfSeq=function(ca){var cb;cb=Y.ofSeq(T.distinct(ca));Y.sortInPlace(cb);return bx.Build(cb,0,cb.length-1);};bx.Enumerate=function(ca,cb){function cc(cd,ce){var cf;while(true)if(cd==null)return ce.$==1?{$:1,$0:[ce.$0[0],[ce.$0[1],ce.$1]]}:null;else if(ca){cf=cd;cd=cf.Right;ce=new B({$:1,$0:[cf.Node,cf.Left],$1:ce});}else{cf=cd;cd=cf.Left;ce=new B({$:1,$0:[cf.Node,cf.Right],$1:ce});}}return T.unfold(function(cd){return cc(cd[0],cd[1]);},[cb,B.Empty]);};bx.Build=function(ca,cb,cc){var cd,ce,cf;return cc-cb+1<=0?null:(cd=(cb+cc)/2>>0,(ce=bx.Build(ca,cb,cd-1),(cf=bx.Build(ca,cd+1,cc),bx.Branch(Y.get(ca,cd),ce,cf))));};bx.Branch=function(ca,cb,cc){var cd,ce;return by.New(ca,cb,cc,1+(cd=cb==null?0:cb.Height,(ce=cc==null?0:cc.Height,K.Compare(cd,ce)===1?cd:ce)),1+(cb==null?0:cb.Count)+(cc==null?0:cc.Count));};bx.Add=function(ca,cb){return bx.Put(function(cc,cd){return cd;},ca,cb);};bx.Put=function(ca,cb,cc){var cd,ce;cd=bx.Lookup(cb,cc);ce=cd[0];return ce==null?bx.Rebuild(cd[1],bx.Branch(cb,null,null)):bx.Rebuild(cd[1],bx.Branch(ca(ce.Node,cb),ce.Left,ce.Right));};bx.Lookup=function(ca,cb){var cc,cd,ce,cf;cc=[];cd=cb;ce=true;while(ce)if(cd==null)ce=false;else{cf=K.Compare(ca,cd.Node);if(cf===0)ce=false;else cf===1?(cc.unshift([true,cd.Node,cd.Left]),cd=cd.Right):(cc.unshift([false,cd.Node,cd.Right]),cd=cd.Left);}return[cd,cc];};bx.Rebuild=function(ca,cb){var cc,ce,cf,cg,ch,ci,cj,ck,cl,cm;function cd(cn){return cn==null?0:cn.Height;}cc=cb;for(ce=0,cf=Y.length(ca)-1;ce<=cf;ce++){cc=(cg=Y.get(ca,ce),cg[0]?(ch=cg[1],(ci=cg[2],cd(cc)>cd(ci)+1?cd(cc.Left)===cd(cc.Right)+1?(cj=cc.Left,bx.Branch(cj.Node,bx.Branch(ch,ci,cj.Left),bx.Branch(cc.Node,cj.Right,cc.Right))):bx.Branch(cc.Node,bx.Branch(ch,ci,cc.Left),cc.Right):bx.Branch(ch,ci,cc))):(ck=cg[1],(cl=cg[2],cd(cc)>cd(cl)+1?cd(cc.Right)===cd(cc.Left)+1?(cm=cc.Right,bx.Branch(cm.Node,bx.Branch(cc.Node,cc.Left,cm.Left),bx.Branch(ck,cm.Right,cl))):bx.Branch(cc.Node,cc.Left,bx.Branch(ck,cc.Right,cl)):bx.Branch(ck,cc,cl))));}return cc;};b0=d.CancellationTokenSource=b8.Class({},f,b0);b0.New=b8.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},b0);b1.Children=function(ca,cb){var cc,cd,ce;if(cb!=null&&cb.$==1){ce=[];cc=cb.$0[0].nextSibling;while(cc!==cb.$0[1]){ce.push(cc);cc=cc.nextSibling;}return{$:0,$0:ce};}else return{$:0,$0:Y.init(ca.childNodes.length,(cd=ca.childNodes,function(cf){return cd[cf];}))};};b1.Except=function(ca,cb){var cc;cc=ca.$0;return{$:0,$0:Y.filter(function(cd){return Y.forall(function(ce){return!(cd===ce);},cc);},cb.$0)};};b1.Iter=function(ca,cb){Y.iter(ca,cb.$0);};b1.DocChildren=function(ca){var cb;function cc(cd){var ce,cf,cg,ch;while(true){if(cd!=null&&cd.$==2){cf=cd.$0;cd=cf.Current;}else if(cd!=null&&cd.$==1)return cb.push(cd.$0.El);else if(cd==null)return null;else if(cd!=null&&cd.$==5)return cb.push(cd.$0);else if(cd!=null&&cd.$==4)return cb.push(cd.$0.Text);else if(cd!=null&&cd.$==6){ce=cd.$0.Els;return(function(ci){return function(cj){Y.iter(ci,cj);};}(function(ci){if(ci==null||ci.constructor===bc)cc(ci);else cb.push(ci);}))(ce);}else{cg=cd.$1;ch=cd.$0;cc(ch);cd=cg;}}}cb=[];cc(ca.Children);return{$:0,$0:bq.ofSeqNonCopying(cb)};};b2=d.OperationCanceledException=b8.Class({},bS,b2);b2.New=b8.Ctor(function(ca){b2.New$1.call(this,"The operation was canceled.",null,ca);},b2);b2.New$1=b8.Ctor(function(ca,cb,cc){this.message=ca;this.inner=cb;bc.setPrototypeOf(this,b2.prototype);this.ct=cc;},b2);b3.Create=function(ca){return b6.New(false,ca,b3.forceLazy);};b3.forceLazy=function(){var ca;ca=this.v();this.c=true;this.v=ca;this.f=b3.cachedLazy;return ca;};b3.cachedLazy=function(){return this.v;};b4.$cctor=function(){b4.$cctor=a.ignore;b4.Empty={$:0};};b6.New=function(ca,cb,cc){return{c:ca,v:cb,f:cc};};b7=d.FormatException=b8.Class({},bS,b7);b7.New$1=b8.Ctor(function(ca){this.message=ca;bc.setPrototypeOf(this,b7.prototype);},b7);b8.OnLoad(function(){c.Main();});}(self));


if (typeof WebSharper !=='undefined') {
  WebSharper.Runtime.ScriptBasePath = '/Content/';
  WebSharper.Runtime.Start();
}
